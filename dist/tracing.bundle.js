/*! For license information please see tracing.bundle.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Tracing=e():t.Tracing=e()}(self,(()=>(()=>{var t={132:t=>{"use strict";function e(t){return"function"==typeof t}var n=console.error.bind(console);function r(t,e,n){var r=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:r,writable:!0,value:n})}function i(t){t&&t.logger&&(e(t.logger)?n=t.logger:n("new logger isn't a function, not replacing"))}function o(t,i,o){if(t&&t[i]){if(!o)return n("no wrapper function"),void n((new Error).stack);if(e(t[i])&&e(o)){var s=t[i],a=o(s,i);return r(a,"__original",s),r(a,"__unwrap",(function(){t[i]===a&&r(t,i,s)})),r(a,"__wrapped",!0),r(t,i,a),a}n("original object and wrapper must be functions")}else n("no original function "+i+" to wrap")}function s(t,e){return t&&t[e]?t[e].__unwrap?t[e].__unwrap():void n("no original to unwrap to -- has "+e+" already been unwrapped?"):(n("no function to unwrap."),void n((new Error).stack))}i.wrap=o,i.massWrap=function(t,e,r){if(!t)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(t)||(t=[t]),e&&Array.isArray(e)?t.forEach((function(t){e.forEach((function(e){o(t,e,r)}))})):n("must provide one or more functions to wrap on modules")},i.unwrap=s,i.massUnwrap=function(t,e){if(!t)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(t)||(t=[t]),e&&Array.isArray(e)?t.forEach((function(t){e.forEach((function(e){s(t,e)}))})):n("must provide one or more functions to unwrap on modules")},t.exports=i},199:(t,e,n)=>{var r,i,o;!function(n,s){if(n){var a={},u=n.TraceKit,c=[].slice,l="?",d=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;a.noConflict=function(){return n.TraceKit=u,a},a.wrap=function(t){return function(){try{return t.apply(this,arguments)}catch(t){throw a.report(t),t}}},a.report=function(){var t,e,r,i,o=[],s=null,u=null;function c(t,e,n){var r=null;if(!e||a.collectWindowErrors){for(var i in o)if(p(o,i))try{o[i](t,e,n)}catch(t){r=t}if(r)throw r}}function l(e,n,r,i,o){if(u)a.computeStackTrace.augmentStackTraceWithInitialElement(u,n,r,e),f();else if(o)c(a.computeStackTrace(o),!0,o);else{var s,l={url:n,line:r,column:i},p=e;if("[object String]"==={}.toString.call(e)){var h=e.match(d);h&&(s=h[1],p=h[2])}l.func=a.computeStackTrace.guessFunctionName(l.url,l.line),l.context=a.computeStackTrace.gatherContext(l.url,l.line),c({name:s,message:p,mode:"onerror",stack:[l]},!0,null)}return!!t&&t.apply(this,arguments)}function h(t){c(a.computeStackTrace(t.reason),!0,t.reason)}function f(){var t=u,e=s;u=null,s=null,c(t,!1,e)}function m(t){if(u){if(s===t)return;f()}var e=a.computeStackTrace(t);throw u=e,s=t,setTimeout((function(){s===t&&f()}),e.incomplete?2e3:0),t}return m.subscribe=function(s){!0!==e&&(t=n.onerror,n.onerror=l,e=!0),!0!==i&&(r=n.onunhandledrejection,n.onunhandledrejection=h,i=!0),o.push(s)},m.unsubscribe=function(s){for(var a=o.length-1;a>=0;--a)o[a]===s&&o.splice(a,1);0===o.length&&(e&&(n.onerror=t,e=!1),i&&(n.onunhandledrejection=r,i=!1))},m}(),a.computeStackTrace=function(){var t=!1,e={};function r(t){if("string"!=typeof t)return[];if(!p(e,t)){var r="",i="";try{i=n.document.domain}catch(t){}var o=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(t);o&&o[2]===i&&(r=function(t){if(!a.remoteFetching)return"";try{var e=function(){try{return new n.XMLHttpRequest}catch(t){return new n.ActiveXObject("Microsoft.XMLHTTP")}}();return e.open("GET",t,!1),e.send(""),e.responseText}catch(t){return""}}(t)),e[t]=r?r.split("\n"):[]}return e[t]}function i(t,e){var n,i=/function ([^(]*)\(([^)]*)\)/,o=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,s="",a=r(t);if(!a.length)return l;for(var u=0;u<10;++u)if(!h(s=a[e-u]+s)){if(n=o.exec(s))return n[1];if(n=i.exec(s))return n[1]}return l}function o(t,e){var n=r(t);if(!n.length)return null;var i=[],o=Math.floor(a.linesOfContext/2),s=o+a.linesOfContext%2,u=Math.max(0,e-o-1),c=Math.min(n.length,e+s-1);e-=1;for(var l=u;l<c;++l)h(n[l])||i.push(n[l]);return i.length>0?i:null}function s(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function u(t){return s(t).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function c(t,e){for(var n,i,o=0,s=e.length;o<s;++o)if((n=r(e[o])).length&&(n=n.join("\n"),i=t.exec(n)))return{url:e[o],line:n.substring(0,i.index).split("\n").length,column:i.index-n.lastIndexOf("\n",i.index)-1};return null}function d(t,e,n){var i,o=r(e),a=new RegExp("\\b"+s(t)+"\\b");return n-=1,o&&o.length>n&&(i=a.exec(o[n]))?i.index:null}function f(t){if(!h(n&&n.document)){for(var e,r,i,o,a=[n.location.href],l=n.document.getElementsByTagName("script"),d=""+t,p=0;p<l.length;++p){var f=l[p];f.src&&a.push(f.src)}if(i=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(d)){var m=i[1]?"\\s+"+i[1]:"",g=i[2].split(",").join("\\s*,\\s*");e=s(i[3]).replace(/;$/,";?"),r=new RegExp("function"+m+"\\s*\\(\\s*"+g+"\\s*\\)\\s*{\\s*"+e+"\\s*}")}else r=new RegExp(s(d).replace(/\s+/g,"\\s+"));if(o=c(r,a))return o;if(i=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(d)){var v=i[1];if(e=u(i[2]),o=c(r=new RegExp("on"+v+"=[\\'\"]\\s*"+e+"\\s*[\\'\"]","i"),a[0]))return o;if(o=c(r=new RegExp(e),a))return o}return null}}function m(t){if(!t.stack)return null;for(var e,n,r,s=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,u=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,c=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,p=/\((\S*)(?::(\d+))(?::(\d+))\)/,f=t.stack.split("\n"),m=[],g=/^(.*) is undefined$/.exec(t.message),v=0,b=f.length;v<b;++v){if(n=s.exec(f[v])){var _=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=p.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]),r={url:_?null:n[2],func:n[1]||l,args:_?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=u.exec(f[v]))r={url:n[2],func:n[1]||l,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=a.exec(f[v])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(e=c.exec(n[3]))?(n[3]=e[1],n[4]=e[2],n[5]=null):0!==v||n[5]||h(t.columnNumber)||(m[0].column=t.columnNumber+1),r={url:n[3],func:n[1]||l,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=i(r.url,r.line)),r.context=r.line?o(r.url,r.line):null,m.push(r)}return m.length?(m[0]&&m[0].line&&!m[0].column&&g&&(m[0].column=d(g[1],m[0].url,m[0].line)),{mode:"stack",name:t.name,message:t.message,stack:m}):null}function g(t,e,n,r){var s={url:e,line:n};if(s.url&&s.line){t.incomplete=!1,s.func||(s.func=i(s.url,s.line)),s.context||(s.context=o(s.url,s.line));var a=/ '([^']+)' /.exec(r);if(a&&(s.column=d(a[1],s.url,s.line)),t.stack.length>0&&t.stack[0].url===s.url){if(t.stack[0].line===s.line)return!1;if(!t.stack[0].line&&t.stack[0].func===s.func)return t.stack[0].line=s.line,t.stack[0].context=s.context,!1}return t.stack.unshift(s),t.partial=!0,!0}return t.incomplete=!0,!1}function v(t,e){for(var n,r,o,s=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],c={},p=!1,h=v.caller;h&&!p;h=h.caller)if(h!==b&&h!==a.report){if(r={url:null,func:l,args:[],line:null,column:null},h.name?r.func=h.name:(n=s.exec(h.toString()))&&(r.func=n[1]),void 0===r.func)try{r.func=n.input.substring(0,n.input.indexOf("{"))}catch(t){}if(o=f(h)){r.url=o.url,r.line=o.line,r.func===l&&(r.func=i(r.url,r.line));var m=/ '([^']+)' /.exec(t.message||t.description);m&&(r.column=d(m[1],o.url,o.line))}c[""+h]?p=!0:c[""+h]=!0,u.push(r)}e&&u.splice(0,e);var _={mode:"callers",name:t.name,message:t.message,stack:u};return g(_,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),_}function b(e,s){var a=null;s=null==s?0:+s;try{if(a=function(t){var e=t.stacktrace;if(e){for(var n,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,s=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,a=e.split("\n"),u=[],c=0;c<a.length;c+=2){var l=null;if((n=r.exec(a[c]))?l={url:n[2],line:+n[1],column:null,func:n[3],args:[]}:(n=s.exec(a[c]))&&(l={url:n[6],line:+n[1],column:+n[2],func:n[3]||n[4],args:n[5]?n[5].split(","):[]}),l){if(!l.func&&l.line&&(l.func=i(l.url,l.line)),l.line)try{l.context=o(l.url,l.line)}catch(t){}l.context||(l.context=[a[c+1]]),u.push(l)}}return u.length?{mode:"stacktrace",name:t.name,message:t.message,stack:u}:null}}(e),a)return a}catch(e){if(t)throw e}try{if(a=m(e))return a}catch(e){if(t)throw e}try{if(a=function(t){var e=t.message.split("\n");if(e.length<4)return null;var s,a=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,l=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,d=/^\s*Line (\d+) of function script\s*$/i,h=[],f=n&&n.document&&n.document.getElementsByTagName("script"),m=[];for(var g in f)p(f,g)&&!f[g].src&&m.push(f[g]);for(var v=2;v<e.length;v+=2){var b=null;if(s=a.exec(e[v]))b={url:s[2],func:s[3],args:[],line:+s[1],column:null};else if(s=l.exec(e[v])){b={url:s[3],func:s[4],args:[],line:+s[1],column:null};var _=+s[1],y=m[s[2]-1];if(y){var w=r(b.url);if(w){var S=(w=w.join("\n")).indexOf(y.innerText);S>=0&&(b.line=_+w.substring(0,S).split("\n").length)}}}else if(s=d.exec(e[v])){var E=n.location.href.replace(/#.*$/,""),T=c(new RegExp(u(e[v+1])),[E]);b={url:E,func:"",args:[],line:T?T.line:s[1],column:null}}if(b){b.func||(b.func=i(b.url,b.line));var C=o(b.url,b.line),x=C?C[Math.floor(C.length/2)]:null;C&&x.replace(/^\s*/,"")===e[v+1].replace(/^\s*/,"")?b.context=C:b.context=[e[v+1]],h.push(b)}}return h.length?{mode:"multiline",name:t.name,message:e[0],stack:h}:null}(e),a)return a}catch(e){if(t)throw e}try{if(a=v(e,s+1))return a}catch(e){if(t)throw e}return{name:e.name,message:e.message,mode:"failed"}}return b.augmentStackTraceWithInitialElement=g,b.computeStackTraceFromStackProp=m,b.guessFunctionName=i,b.gatherContext=o,b.ofCaller=function(t){t=1+(null==t?0:+t);try{throw new Error}catch(e){return b(e,t+1)}},b.getSource=r,b}(),a.extendToAsynchronousCallbacks=function(){var t=function(t){var e=n[t];n[t]=function(){var t=c.call(arguments),n=t[0];return"function"==typeof n&&(t[0]=a.wrap(n)),e.apply?e.apply(this,t):e(t[0],t[1])}};t("setTimeout"),t("setInterval")},a.remoteFetching||(a.remoteFetching=!0),a.collectWindowErrors||(a.collectWindowErrors=!0),(!a.linesOfContext||a.linesOfContext<1)&&(a.linesOfContext=11),i=[],void 0===(o="function"==typeof(r=a)?r.apply(e,i):r)||(t.exports=o)}function p(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h(t){return void 0===t}}("undefined"!=typeof window?window:n.g)},232:function(t,e,n){var r;!function(i,o){"use strict";var s="function",a="undefined",u="object",c="string",l="major",d="model",p="name",h="type",f="vendor",m="version",g="architecture",v="console",b="mobile",_="tablet",y="smarttv",w="wearable",S="embedded",E="Amazon",T="Apple",C="ASUS",x="BlackBerry",A="Browser",O="Chrome",L="Firefox",P="Google",k="Huawei",R="LG",N="Microsoft",D="Motorola",M="Opera",I="Samsung",$="Sharp",j="Sony",F="Xiaomi",U="Zebra",B="Facebook",H="Chromium OS",z="Mac OS",V=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].toUpperCase()]=t[n];return e},q=function(t,e){return typeof t===c&&-1!==G(e).indexOf(G(t))},G=function(t){return t.toLowerCase()},W=function(t,e){if(typeof t===c)return t=t.replace(/^\s\s*/,""),typeof e===a?t:t.substring(0,500)},X=function(t,e){for(var n,r,i,a,c,l,d=0;d<e.length&&!c;){var p=e[d],h=e[d+1];for(n=r=0;n<p.length&&!c&&p[n];)if(c=p[n++].exec(t))for(i=0;i<h.length;i++)l=c[++r],typeof(a=h[i])===u&&a.length>0?2===a.length?typeof a[1]==s?this[a[0]]=a[1].call(this,l):this[a[0]]=a[1]:3===a.length?typeof a[1]!==s||a[1].exec&&a[1].test?this[a[0]]=l?l.replace(a[1],a[2]):o:this[a[0]]=l?a[1].call(this,l,a[2]):o:4===a.length&&(this[a[0]]=l?a[3].call(this,l.replace(a[1],a[2])):o):this[a]=l||o;d+=2}},K=function(t,e){for(var n in e)if(typeof e[n]===u&&e[n].length>0){for(var r=0;r<e[n].length;r++)if(q(e[n][r],t))return"?"===n?o:n}else if(q(e[n],t))return"?"===n?o:n;return t},Z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,m],[/opios[\/ ]+([\w\.]+)/i],[m,[p,M+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[m,[p,M+" GX"]],[/\bopr\/([\w\.]+)/i],[m,[p,M]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[p,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[p,m],[/\bddg\/([\w\.]+)/i],[m,[p,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[p,"UC"+A]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[p,"Smart Lenovo "+A]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+A],m],[/\bfocus\/([\w\.]+)/i],[m,[p,L+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[p,M+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[p,M+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[p,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[m,[p,L]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+A]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+A],m],[/samsungbrowser\/([\w\.]+)/i],[m,[p,I+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],m],[/metasr[\/ ]?([\d\.]+)/i],[m,[p,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,"Sogou Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[p,m],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,B],m],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[p,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[p,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[p,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[p,O+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,O+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[p,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[m,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[p,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[p,L+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[p,m],[/(cobalt)\/([\w\.]+)/i],[p,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,G]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[f,I],[h,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[f,I],[h,b]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[f,T],[h,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[f,T],[h,_]],[/(macintosh);/i],[d,[f,T]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[f,$],[h,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[f,k],[h,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[f,k],[h,b]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[f,F],[h,b]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[f,F],[h,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[f,"OPPO"],[h,b]],[/\b(opd2\d{3}a?) bui/i],[d,[f,"OPPO"],[h,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[f,"Vivo"],[h,b]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[f,"Realme"],[h,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[f,D],[h,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[f,D],[h,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[f,R],[h,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[f,R],[h,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[f,"Lenovo"],[h,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[f,"Nokia"],[h,b]],[/(pixel c)\b/i],[d,[f,P],[h,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[f,P],[h,b]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[f,j],[h,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[f,j],[h,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[f,"OnePlus"],[h,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[f,E],[h,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[f,E],[h,b]],[/(playbook);[-\w\),; ]+(rim)/i],[d,f,[h,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[f,x],[h,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[f,C],[h,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[f,C],[h,b]],[/(nexus 9)/i],[d,[f,"HTC"],[h,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[d,/_/g," "],[h,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[f,"Acer"],[h,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[f,"Meizu"],[h,b]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[f,"Ulefone"],[h,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,d,[h,b]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,d,[h,_]],[/(surface duo)/i],[d,[f,N],[h,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[f,"Fairphone"],[h,b]],[/(u304aa)/i],[d,[f,"AT&T"],[h,b]],[/\bsie-(\w*)/i],[d,[f,"Siemens"],[h,b]],[/\b(rct\w+) b/i],[d,[f,"RCA"],[h,_]],[/\b(venue[\d ]{2,7}) b/i],[d,[f,"Dell"],[h,_]],[/\b(q(?:mv|ta)\w+) b/i],[d,[f,"Verizon"],[h,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[f,"Barnes & Noble"],[h,_]],[/\b(tm\d{3}\w+) b/i],[d,[f,"NuVision"],[h,_]],[/\b(k88) b/i],[d,[f,"ZTE"],[h,_]],[/\b(nx\d{3}j) b/i],[d,[f,"ZTE"],[h,b]],[/\b(gen\d{3}) b.+49h/i],[d,[f,"Swiss"],[h,b]],[/\b(zur\d{3}) b/i],[d,[f,"Swiss"],[h,_]],[/\b((zeki)?tb.*\b) b/i],[d,[f,"Zeki"],[h,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],d,[h,_]],[/\b(ns-?\w{0,9}) b/i],[d,[f,"Insignia"],[h,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[f,"NextBook"],[h,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],d,[h,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],d,[h,b]],[/\b(ph-1) /i],[d,[f,"Essential"],[h,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[f,"Envizen"],[h,_]],[/\b(trio[-\w\. ]+) b/i],[d,[f,"MachSpeed"],[h,_]],[/\btu_(1491) b/i],[d,[f,"Rotor"],[h,_]],[/(shield[\w ]+) b/i],[d,[f,"Nvidia"],[h,_]],[/(sprint) (\w+)/i],[f,d,[h,b]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[f,N],[h,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[f,U],[h,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[f,U],[h,b]],[/smart-tv.+(samsung)/i],[f,[h,y]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[f,I],[h,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,R],[h,y]],[/(apple) ?tv/i],[f,[d,T+" TV"],[h,y]],[/crkey/i],[[d,O+"cast"],[f,P],[h,y]],[/droid.+aft(\w+)( bui|\))/i],[d,[f,E],[h,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[f,$],[h,y]],[/(bravia[\w ]+)( bui|\))/i],[d,[f,j],[h,y]],[/(mitv-\w{5}) bui/i],[d,[f,F],[h,y]],[/Hbbtv.*(technisat) (.*);/i],[f,d,[h,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,W],[d,W],[h,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,d,[h,v]],[/droid.+; (shield) bui/i],[d,[f,"Nvidia"],[h,v]],[/(playstation [345portablevi]+)/i],[d,[f,j],[h,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[f,N],[h,v]],[/((pebble))app/i],[f,d,[h,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[f,T],[h,w]],[/droid.+; (glass) \d/i],[d,[f,P],[h,w]],[/droid.+; (wt63?0{2,3})\)/i],[d,[f,U],[h,w]],[/(quest( \d| pro)?)/i],[d,[f,B],[h,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[h,S]],[/(aeobc)\b/i],[d,[f,E],[h,S]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[h,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[h,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,b]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[p,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,m],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[p,[m,K,Z]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,K,Z],[p,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,z],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,m],[/\(bb(10);/i],[m,[p,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[p,L+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[p,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[p,O+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,H],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,m],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,m]]},Y=function(t,e){if(typeof t===u&&(e=t,t=o),!(this instanceof Y))return new Y(t,e).getResult();var n=typeof i!==a&&i.navigator?i.navigator:o,r=t||(n&&n.userAgent?n.userAgent:""),v=n&&n.userAgentData?n.userAgentData:o,y=e?function(t,e){var n={};for(var r in t)e[r]&&e[r].length%2==0?n[r]=e[r].concat(t[r]):n[r]=t[r];return n}(Q,e):Q,w=n&&n.userAgent==r;return this.getBrowser=function(){var t,e={};return e[p]=o,e[m]=o,X.call(e,r,y.browser),e[l]=typeof(t=e[m])===c?t.replace(/[^\d\.]/g,"").split(".")[0]:o,w&&n&&n.brave&&typeof n.brave.isBrave==s&&(e[p]="Brave"),e},this.getCPU=function(){var t={};return t[g]=o,X.call(t,r,y.cpu),t},this.getDevice=function(){var t={};return t[f]=o,t[d]=o,t[h]=o,X.call(t,r,y.device),w&&!t[h]&&v&&v.mobile&&(t[h]=b),w&&"Macintosh"==t[d]&&n&&typeof n.standalone!==a&&n.maxTouchPoints&&n.maxTouchPoints>2&&(t[d]="iPad",t[h]=_),t},this.getEngine=function(){var t={};return t[p]=o,t[m]=o,X.call(t,r,y.engine),t},this.getOS=function(){var t={};return t[p]=o,t[m]=o,X.call(t,r,y.os),w&&!t[p]&&v&&v.platform&&"Unknown"!=v.platform&&(t[p]=v.platform.replace(/chrome os/i,H).replace(/macos/i,z)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(t){return r=typeof t===c&&t.length>500?W(t,500):t,this},this.setUA(r),this};Y.VERSION="1.0.38",Y.BROWSER=V([p,m,l]),Y.CPU=V([g]),Y.DEVICE=V([d,f,h,v,b,y,_,w,S]),Y.ENGINE=Y.OS=V([p,m]),typeof e!==a?(t.exports&&(e=t.exports=Y),e.UAParser=Y):n.amdO?(r=function(){return Y}.call(e,n,e,t))===o||(t.exports=r):typeof i!==a&&(i.UAParser=Y);var J=typeof i!==a&&(i.jQuery||i.Zepto);if(J&&!J.ua){var tt=new Y;J.ua=tt.getResult(),J.ua.get=function(){return tt.getUA()},J.ua.set=function(t){tt.setUA(t);var e=tt.getResult();for(var n in e)J.ua[n]=e[n]}}}("object"==typeof window?window:this)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.amdO={},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r);var t="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},e="1.9.0",i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,o=function(t){var e=new Set([t]),n=new Set,r=t.match(i);if(!r)return function(){return!1};var o=+r[1],s=+r[2],a=+r[3];if(null!=r[4])return function(e){return e===t};function u(t){return n.add(t),!1}function c(t){return e.add(t),!0}return function(t){if(e.has(t))return!0;if(n.has(t))return!1;var r=t.match(i);if(!r)return u(t);var l=+r[1],d=+r[2],p=+r[3];return null!=r[4]||o!==l?u(t):0===o?s===d&&a<=p?c(t):u(t):s<=d?c(t):u(t)}}(e),s=e.split(".")[0],a=Symbol.for("opentelemetry.js.api."+s),u=t;function c(t,n,r,i){var o;void 0===i&&(i=!1);var s=u[a]=null!==(o=u[a])&&void 0!==o?o:{version:e};if(!i&&s[t]){var c=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(c.stack||c.message),!1}return s.version!==e?(c=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+t+" does not match previously registered API v"+e),r.error(c.stack||c.message),!1):(s[t]=n,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+e+"."),!0)}function l(t){var e,n,r=null===(e=u[a])||void 0===e?void 0:e.version;if(r&&o(r))return null===(n=u[a])||void 0===n?void 0:n[t]}function d(t,n){n.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+e+".");var r=u[a];r&&delete r[t]}function p(t){return Symbol.for(t)}var h,f=new function t(e){var n=this;n._currentContext=e?new Map(e):new Map,n.getValue=function(t){return n._currentContext.get(t)},n.setValue=function(e,r){var i=new t(n._currentContext);return i._currentContext.set(e,r),i},n.deleteValue=function(e){var r=new t(n._currentContext);return r._currentContext.delete(e),r}},m=function(){function t(){}return t.prototype.active=function(){return f},t.prototype.with=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return e.call.apply(e,function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([n],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(r),!1))},t.prototype.bind=function(t,e){return e},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),g=function(){function t(t){this._namespace=t.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return v("debug",this._namespace,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return v("error",this._namespace,t)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return v("info",this._namespace,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return v("warn",this._namespace,t)},t.prototype.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return v("verbose",this._namespace,t)},t}();function v(t,e,n){var r=l("diag");if(r)return n.unshift(e),r[t].apply(r,function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(n),!1))}!function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"}(h||(h={}));var b,_,y=function(){function t(){function t(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=l("diag");if(r)return r[t].apply(r,function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e),!1))}}var e=this;e.setLogger=function(t,n){var r,i,o;if(void 0===n&&(n={logLevel:h.INFO}),t===e){var s=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return e.error(null!==(r=s.stack)&&void 0!==r?r:s.message),!1}"number"==typeof n&&(n={logLevel:n});var a=l("diag"),u=function(t,e){function n(n,r){var i=e[n];return"function"==typeof i&&t>=r?i.bind(e):function(){}}return t<h.NONE?t=h.NONE:t>h.ALL&&(t=h.ALL),e=e||{},{error:n("error",h.ERROR),warn:n("warn",h.WARN),info:n("info",h.INFO),debug:n("debug",h.DEBUG),verbose:n("verbose",h.VERBOSE)}}(null!==(i=n.logLevel)&&void 0!==i?i:h.INFO,t);if(a&&!n.suppressOverrideMessage){var d=null!==(o=(new Error).stack)&&void 0!==o?o:"<failed to generate stacktrace>";a.warn("Current logger will be overwritten from "+d),u.warn("Current logger will overwrite one already registered from "+d)}return c("diag",u,e,!0)},e.disable=function(){d("diag",e)},e.createComponentLogger=function(t){return new g(t)},e.verbose=t("verbose"),e.debug=t("debug"),e.info=t("info"),e.warn=t("warn"),e.error=t("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),w="context",S=new m,E=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(t){return c(w,t,y.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(r=this._getContextManager()).with.apply(r,function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([t,e,n],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(i),!1))},t.prototype.bind=function(t,e){return this._getContextManager().bind(t,e)},t.prototype._getContextManager=function(){return l(w)||S},t.prototype.disable=function(){this._getContextManager().disable(),d(w,y.instance())},t}();(_=b||(b={}))[_.NONE=0]="NONE",_[_.SAMPLED=1]="SAMPLED";var T="0000000000000000",C="00000000000000000000000000000000",x={traceId:C,spanId:T,traceFlags:b.NONE},A=function(){function t(t){void 0===t&&(t=x),this._spanContext=t}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(t,e){return this},t.prototype.setAttributes=function(t){return this},t.prototype.addEvent=function(t,e){return this},t.prototype.addLink=function(t){return this},t.prototype.addLinks=function(t){return this},t.prototype.setStatus=function(t){return this},t.prototype.updateName=function(t){return this},t.prototype.end=function(t){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(t,e){},t}(),O=p("OpenTelemetry Context Key SPAN");function L(t){return t.getValue(O)||void 0}function P(){return L(E.getInstance().active())}function k(t,e){return t.setValue(O,e)}function R(t){return t.deleteValue(O)}function N(t,e){return k(t,new A(e))}function D(t){var e;return null===(e=L(t))||void 0===e?void 0:e.spanContext()}var M=/^([0-9a-f]{32})$/i,I=/^[0-9a-f]{16}$/i;function $(t){return M.test(t)&&t!==C}function j(t){return $(t.traceId)&&(e=t.spanId,I.test(e)&&e!==T);var e}function F(t){return new A(t)}var U,B=E.getInstance(),H=function(){function t(){}return t.prototype.startSpan=function(t,e,n){if(void 0===n&&(n=B.active()),Boolean(null==e?void 0:e.root))return new A;var r,i=n&&D(n);return"object"==typeof(r=i)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&j(i)?new A(i):new A},t.prototype.startActiveSpan=function(t,e,n,r){var i,o,s;if(!(arguments.length<2)){2===arguments.length?s=e:3===arguments.length?(i=e,s=n):(i=e,o=n,s=r);var a=null!=o?o:B.active(),u=this.startSpan(t,i,a),c=k(a,u);return B.with(c,s,void 0,u)}},t}(),z=new H,V=function(){function t(t,e,n,r){this._provider=t,this.name=e,this.version=n,this.options=r}return t.prototype.startSpan=function(t,e,n){return this._getTracer().startSpan(t,e,n)},t.prototype.startActiveSpan=function(t,e,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):z},t}(),q=new(function(){function t(){}return t.prototype.getTracer=function(t,e,n){return new H},t}()),G=function(){function t(){}return t.prototype.getTracer=function(t,e,n){var r;return null!==(r=this.getDelegateTracer(t,e,n))&&void 0!==r?r:new V(this,t,e,n)},t.prototype.getDelegate=function(){var t;return null!==(t=this._delegate)&&void 0!==t?t:q},t.prototype.setDelegate=function(t){this._delegate=t},t.prototype.getDelegateTracer=function(t,e,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(t,e,n)},t}(),W="trace",X=function(){function t(){this._proxyTracerProvider=new G,this.wrapSpanContext=F,this.isSpanContextValid=j,this.deleteSpan=R,this.getSpan=L,this.getActiveSpan=P,this.getSpanContext=D,this.setSpan=k,this.setSpanContext=N}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(t){var e=c(W,this._proxyTracerProvider,y.instance());return e&&this._proxyTracerProvider.setDelegate(t),e},t.prototype.getTracerProvider=function(){return l(W)||this._proxyTracerProvider},t.prototype.getTracer=function(t,e){return this.getTracerProvider().getTracer(t,e)},t.prototype.disable=function(){d(W,y.instance()),this._proxyTracerProvider=new G},t}().getInstance(),K=(U=function(t,e){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},U(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}U(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Z=function(){function t(){}return t.prototype.createGauge=function(t,e){return ut},t.prototype.createHistogram=function(t,e){return ct},t.prototype.createCounter=function(t,e){return at},t.prototype.createUpDownCounter=function(t,e){return lt},t.prototype.createObservableGauge=function(t,e){return pt},t.prototype.createObservableCounter=function(t,e){return dt},t.prototype.createObservableUpDownCounter=function(t,e){return ht},t.prototype.addBatchObservableCallback=function(t,e){},t.prototype.removeBatchObservableCallback=function(t){},t}(),Q=function(){},Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return K(e,t),e.prototype.add=function(t,e){},e}(Q),J=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return K(e,t),e.prototype.add=function(t,e){},e}(Q),tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return K(e,t),e.prototype.record=function(t,e){},e}(Q),et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return K(e,t),e.prototype.record=function(t,e){},e}(Q),nt=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.removeCallback=function(t){},t}(),rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return K(e,t),e}(nt),it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return K(e,t),e}(nt),ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return K(e,t),e}(nt),st=new Z,at=new Y,ut=new tt,ct=new et,lt=new J,dt=new rt,pt=new it,ht=new ot,ft=new(function(){function t(){}return t.prototype.getMeter=function(t,e,n){return st},t}()),mt="metrics",gt=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(t){return c(mt,t,y.instance())},t.prototype.getMeterProvider=function(){return l(mt)||ft},t.prototype.getMeter=function(t,e,n){return this.getMeterProvider().getMeter(t,e,n)},t.prototype.disable=function(){d(mt,y.instance())},t}().getInstance();const vt="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},bt=Symbol.for("io.opentelemetry.js.api.logs"),_t=vt;class yt{emit(t){}}const wt=new yt,St=new class{getLogger(t,e,n){return new yt}};class Et{constructor(t,e,n,r){this._provider=t,this.name=e,this.version=n,this.options=r}emit(t){this._getLogger().emit(t)}_getLogger(){if(this._delegate)return this._delegate;const t=this._provider.getDelegateLogger(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):wt}}class Tt{getLogger(t,e,n){var r;return null!==(r=this.getDelegateLogger(t,e,n))&&void 0!==r?r:new Et(this,t,e,n)}getDelegate(){var t;return null!==(t=this._delegate)&&void 0!==t?t:St}setDelegate(t){this._delegate=t}getDelegateLogger(t,e,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getLogger(t,e,n)}}class Ct{constructor(){this._proxyLoggerProvider=new Tt}static getInstance(){return this._instance||(this._instance=new Ct),this._instance}setGlobalLoggerProvider(t){return _t[bt]?this.getLoggerProvider():(_t[bt]=(1,e=t,n=St,t=>1===t?e:n),this._proxyLoggerProvider.setDelegate(t),t);var e,n}getLoggerProvider(){var t,e;return null!==(e=null===(t=_t[bt])||void 0===t?void 0:t.call(_t,1))&&void 0!==e?e:this._proxyLoggerProvider}getLogger(t,e,n){return this.getLoggerProvider().getLogger(t,e,n)}disable(){delete _t[bt],this._proxyLoggerProvider=new Tt}}const xt=Ct.getInstance();var At=y.instance();const Ot="process.runtime.name",Lt="telemetry.sdk.name",Pt="telemetry.sdk.language",kt="telemetry.sdk.version",Rt={[Lt]:"opentelemetry",[Ot]:"browser",[Pt]:"webjs",[kt]:"2.0.0"},Nt="exception.message",Dt="exception.stacktrace",Mt="exception.type",It="service.name",$t="telemetry.sdk.language",jt="telemetry.sdk.name",Ft="telemetry.sdk.version",Ut=t=>null!==t&&"object"==typeof t&&"function"==typeof t.then;class Bt{_rawAttributes;_asyncAttributesPending=!1;_memoizedAttributes;static FromAttributeList(t){const e=new Bt({});return e._rawAttributes=t,e._asyncAttributesPending=t.filter((([t,e])=>Ut(e))).length>0,e}constructor(t){const e=t.attributes??{};this._rawAttributes=Object.entries(e).map((([t,e])=>(Ut(e)&&(this._asyncAttributesPending=!0),[t,e])))}get asyncAttributesPending(){return this._asyncAttributesPending}async waitForAsyncAttributes(){if(this.asyncAttributesPending){for(let t=0;t<this._rawAttributes.length;t++){const[e,n]=this._rawAttributes[t];try{this._rawAttributes[t]=[e,Ut(n)?await n:n]}catch(n){At.debug("a resource's async attributes promise rejected: %s",n),this._rawAttributes[t]=[e,void 0]}}this._asyncAttributesPending=!1}}get attributes(){if(this.asyncAttributesPending&&At.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;const t={};for(const[e,n]of this._rawAttributes)Ut(n)?At.debug(`Unsettled resource attribute ${e} skipped`):null!=n&&(t[e]??=n);return this._asyncAttributesPending||(this._memoizedAttributes=t),t}getRawAttributes(){return this._rawAttributes}merge(t){return null==t?this:Bt.FromAttributeList([...t.getRawAttributes(),...this.getRawAttributes()])}}function Ht(t){return Bt.FromAttributeList(Object.entries(t))}function zt(){return Ht({})}const Vt=t=>{t.forEach((t=>{if(Object.keys(t.attributes).length>0){const e=JSON.stringify(t.attributes,null,4);At.verbose(e)}}))};var qt=E.getInstance();class Gt{_promise;_resolve;_reject;constructor(){this._promise=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}get promise(){return this._promise}resolve(t){this._resolve(t)}reject(t){this._reject(t)}}class Wt{_callback;_that;_isCalled=!1;_deferred=new Gt;constructor(t,e){this._callback=t,this._that=e}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...t){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...t)).then((t=>this._deferred.resolve(t)),(t=>this._deferred.reject(t)))}catch(t){this._deferred.reject(t)}}return this._deferred.promise}}const Xt=p("OpenTelemetry SDK Context Key SUPPRESS_TRACING");var Kt;!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(Kt||(Kt={}));function Zt(t){try{(t=>{At.error(function(t){return"string"==typeof t?t:JSON.stringify(function(t){const e={};let n=t;for(;null!==n;)Object.getOwnPropertyNames(n).forEach((t=>{if(e[t])return;const r=n[t];r&&(e[t]=String(r))})),n=Object.getPrototypeOf(n);return e}(t))}(t))})(t)}catch{}}class Qt{_exporter;_maxExportBatchSize;_maxQueueSize;_scheduledDelayMillis;_exportTimeoutMillis;_isExporting=!1;_finishedSpans=[];_timer;_shutdownOnce;_droppedSpansCount=0;constructor(t,e){this._exporter=t,this._maxExportBatchSize="number"==typeof e?.maxExportBatchSize?e.maxExportBatchSize:512,this._maxQueueSize="number"==typeof e?.maxQueueSize?e.maxQueueSize:2048,this._scheduledDelayMillis="number"==typeof e?.scheduledDelayMillis?e.scheduledDelayMillis:5e3,this._exportTimeoutMillis="number"==typeof e?.exportTimeoutMillis?e.exportTimeoutMillis:3e4,this._shutdownOnce=new Wt(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(At.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(t,e){}onEnd(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&b.SAMPLED&&this._addToBuffer(t)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown()))}_addToBuffer(t){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&At.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(At.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()}_flushAll(){return new Promise(((t,e)=>{const n=[];for(let t=0,e=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);t<e;t++)n.push(this._flushOneBatch());Promise.all(n).then((()=>{t()})).catch(e)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(((t,e)=>{const n=setTimeout((()=>{e(new Error("Timeout"))}),this._exportTimeoutMillis);qt.with(qt.active().setValue(Xt,!0),(()=>{let r;this._finishedSpans.length<=this._maxExportBatchSize?(r=this._finishedSpans,this._finishedSpans=[]):r=this._finishedSpans.splice(0,this._maxExportBatchSize);const i=()=>this._exporter.export(r,(r=>{clearTimeout(n),r.code===Kt.SUCCESS?t():e(r.error??new Error("BatchSpanProcessor: span export failed"))}));let o=null;for(let t=0,e=r.length;t<e;t++){const e=r[t];e.resource.asyncAttributesPending&&e.resource.waitForAsyncAttributes&&(o??=[],o.push(e.resource.waitForAsyncAttributes()))}null===o?i():Promise.all(o).then(i,(t=>{Zt(t),e(t)}))}))}))}_maybeStartTimer(){if(this._isExporting)return;const t=()=>{this._isExporting=!0,this._flushOneBatch().finally((()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((t=>{this._isExporting=!1,Zt(t)}))};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();void 0===this._timer&&(this._timer=setTimeout((()=>t()),this._scheduledDelayMillis),this._timer)}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}class Yt extends Qt{_visibilityChangeListener;_pageHideListener;constructor(t,e){super(t,e),this.onInit(e)}onInit(t){!0!==t?.disableAutoFlushOnDocumentHide&&"undefined"!=typeof document&&(this._visibilityChangeListener=()=>{"hidden"===document.visibilityState&&this.forceFlush().catch((t=>{Zt(t)}))},this._pageHideListener=()=>{this.forceFlush().catch((t=>{Zt(t)}))},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))}onShutdown(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))}}var Jt;!function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Jt||(Jt={}));class te{shouldSample(){return{decision:Jt.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}class ee{shouldSample(){return{decision:Jt.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}class ne{_ratio;_upperBound;constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(t,e){return{decision:$(e)&&this._accumulate(e)<this._upperBound?Jt.RECORD_AND_SAMPLED:Jt.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return"number"!=typeof t||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let e=0;for(let n=0;n<t.length/8;n++){const r=8*n;e=(e^parseInt(t.slice(r,r+8),16))>>>0}return e}}class re{generateTraceId=oe(16);generateSpanId=oe(8)}const ie=Array(32);function oe(t){return function(){for(let e=0;e<2*t;e++)ie[e]=Math.floor(16*Math.random())+48,ie[e]>=58&&(ie[e]+=39);return String.fromCharCode.apply(null,ie.slice(0,2*t))}}const se="[object Object]",ae="[object Null]",ue="[object Undefined]",ce=Function.prototype.toString,le=ce.call(Object),de=Object.getPrototypeOf,pe=Object.prototype,he=pe.hasOwnProperty,fe=Symbol?Symbol.toStringTag:void 0,me=pe.toString;function ge(t){if(!function(t){return null!=t&&"object"==typeof t}(t)||function(t){return null==t?void 0===t?ue:ae:fe&&fe in Object(t)?function(t){const e=he.call(t,fe),n=t[fe];let r=!1;try{t[fe]=void 0,r=!0}catch(t){}const i=me.call(t);return r&&(e?t[fe]=n:delete t[fe]),i}(t):function(t){return me.call(t)}(t)}(t)!==se)return!1;const e=de(t);if(null===e)return!0;const n=he.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ce.call(n)===le}function ve(t){return ye(t)?t.slice():t}function be(t,e,n=0,r){let i;if(!(n>20)){if(n++,Ee(t)||Ee(e)||we(e))i=ve(e);else if(ye(t)){if(i=t.slice(),ye(e))for(let t=0,n=e.length;t<n;t++)i.push(ve(e[t]));else if(Se(e)){const t=Object.keys(e);for(let n=0,r=t.length;n<r;n++){const r=t[n];i[r]=ve(e[r])}}}else if(Se(t))if(Se(e)){if(!function(t,e){return!(!ge(t)||!ge(e))}(t,e))return e;i=Object.assign({},t);const o=Object.keys(e);for(let s=0,a=o.length;s<a;s++){const a=o[s],u=e[a];if(Ee(u))void 0===u?delete i[a]:i[a]=u;else{const o=i[a],s=u;if(_e(t,a,r)||_e(e,a,r))delete i[a];else{if(Se(o)&&Se(s)){const n=r.get(o)||[],i=r.get(s)||[];n.push({obj:t,key:a}),i.push({obj:e,key:a}),r.set(o,n),r.set(s,i)}i[a]=be(i[a],u,n,r)}}}}else i=e;return i}}function _e(t,e,n){const r=n.get(t[e])||[];for(let n=0,i=r.length;n<i;n++){const i=r[n];if(i.key===e&&i.obj===t)return!0}return!1}function ye(t){return Array.isArray(t)}function we(t){return"function"==typeof t}function Se(t){return!Ee(t)&&!ye(t)&&!we(t)&&"object"==typeof t}function Ee(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||void 0===t||t instanceof Date||t instanceof RegExp||null===t}var Te,Ce,xe;function Ae(t){const e={};if("object"!=typeof t||null==t)return e;for(const[n,r]of Object.entries(t))Oe(n)?Le(r)?Array.isArray(r)?e[n]=r.slice():e[n]=r:At.warn(`Invalid attribute value set for key: ${n}`):At.warn(`Invalid attribute key: ${n}`);return e}function Oe(t){return"string"==typeof t&&t.length>0}function Le(t){return null==t||(Array.isArray(t)?function(t){let e;for(const n of t)if(null!=n){if(!e){if(Pe(n)){e=typeof n;continue}return!1}if(typeof n!==e)return!1}return!0}(t):Pe(t))}function Pe(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}!function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"}(Te||(Te={})),function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Ce||(Ce={})),function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"}(xe||(xe={}));const ke=performance,Re=Math.pow(10,6),Ne=Math.pow(10,9);function De(t){const e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*Re)]}function Me(){let t=ke.timeOrigin;if("number"!=typeof t){const e=ke;t=e.timing&&e.timing.fetchStart}return t}function Ie(t){return Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]}function $e(t){return Ie(t)||"number"==typeof t||t instanceof Date}function je(t,e){const n=[t[0]+e[0],t[1]+e[1]];return n[1]>=Ne&&(n[1]-=Ne,n[0]+=1),n}const Fe="exception.type",Ue="exception.message",Be="http.method",He="http.url",ze="http.host",Ve="http.scheme",qe="http.status_code",Ge="http.user_agent",We="http.request_content_length_uncompressed";class Xe{_spanContext;kind;parentSpanContext;attributes={};links=[];events=[];startTime;resource;instrumentationScope;_droppedAttributesCount=0;_droppedEventsCount=0;_droppedLinksCount=0;name;status={code:xe.UNSET};endTime=[0,0];_ended=!1;_duration=[-1,-1];_spanProcessor;_spanLimits;_attributeValueLengthLimit;_performanceStartTime;_performanceOffset;_startTimeProvided;constructor(t){const e=Date.now();this._spanContext=t.spanContext,this._performanceStartTime=ke.now(),this._performanceOffset=e-(this._performanceStartTime+Me()),this._startTimeProvided=null!=t.startTime,this._spanLimits=t.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=t.spanProcessor,this.name=t.name,this.parentSpanContext=t.parentSpanContext,this.kind=t.kind,this.links=t.links||[],this.startTime=this._getTime(t.startTime??e),this.resource=t.resource,this.instrumentationScope=t.scope,null!=t.attributes&&this.setAttributes(t.attributes),this._spanProcessor.onStart(this,t.context)}spanContext(){return this._spanContext}setAttribute(t,e){if(null==e||this._isSpanEnded())return this;if(0===t.length)return At.warn(`Invalid attribute key: ${t}`),this;if(!Le(e))return At.warn(`Invalid attribute value set for key: ${t}`),this;const{attributeCountLimit:n}=this._spanLimits;return void 0!==n&&Object.keys(this.attributes).length>=n&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(e),this)}setAttributes(t){for(const[e,n]of Object.entries(t))this.setAttribute(e,n);return this}addEvent(t,e,n){if(this._isSpanEnded())return this;const{eventCountLimit:r}=this._spanLimits;if(0===r)return At.warn("No events allowed."),this._droppedEventsCount++,this;void 0!==r&&this.events.length>=r&&(0===this._droppedEventsCount&&At.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),$e(e)&&($e(n)||(n=e),e=void 0);const i=Ae(e);return this.events.push({name:t,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this}addLink(t){return this.links.push(t),this}addLinks(t){return this.links.push(...t),this}setStatus(t){return this._isSpanEnded()||(this.status={...t},null!=this.status.message&&"string"!=typeof t.message&&(At.warn(`Dropping invalid status.message of type '${typeof t.message}', expected 'string'`),delete this.status.message)),this}updateName(t){return this._isSpanEnded()||(this.name=t),this}end(t){this._isSpanEnded()?At.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`):(this._ended=!0,this.endTime=this._getTime(t),this._duration=function(t,e){let n=e[0]-t[0],r=e[1]-t[1];return r<0&&(n-=1,r+=Ne),[n,r]}(this.startTime,this.endTime),this._duration[0]<0&&(At.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&At.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this))}_getTime(t){if("number"==typeof t&&t<=ke.now())return e=t+this._performanceOffset,je(De(Me()),De("number"==typeof e?e:ke.now()));var e;if("number"==typeof t)return De(t);if(t instanceof Date)return De(t.getTime());if(Ie(t))return t;if(this._startTimeProvided)return De(Date.now());const n=ke.now()-this._performanceStartTime;return je(this.startTime,De(n))}isRecording(){return!1===this._ended}recordException(t,e){const n={};"string"==typeof t?n[Ue]=t:t&&(t.code?n[Fe]=t.code.toString():t.name&&(n[Fe]=t.name),t.message&&(n[Ue]=t.message),t.stack&&(n["exception.stacktrace"]=t.stack)),n[Fe]||n[Ue]?this.addEvent("exception",n,e):At.warn(`Failed to record an exception ${t}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){const t=new Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`);At.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,t)}return this._ended}_truncateToLimitUtil(t,e){return t.length<=e?t:t.substring(0,e)}_truncateToSize(t){const e=this._attributeValueLengthLimit;return e<=0?(At.warn(`Attribute value limit must be positive, got ${e}`),t):"string"==typeof t?this._truncateToLimitUtil(t,e):Array.isArray(t)?t.map((t=>"string"==typeof t?this._truncateToLimitUtil(t,e):t)):t}}class Ke{_root;_remoteParentSampled;_remoteParentNotSampled;_localParentSampled;_localParentNotSampled;constructor(t){this._root=t.root,this._root||(Zt(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new ee),this._remoteParentSampled=t.remoteParentSampled??new ee,this._remoteParentNotSampled=t.remoteParentNotSampled??new te,this._localParentSampled=t.localParentSampled??new ee,this._localParentNotSampled=t.localParentNotSampled??new te}shouldSample(t,e,n,r,i,o){const s=X.getSpanContext(t);return s&&j(s)?s.isRemote?s.traceFlags&b.SAMPLED?this._remoteParentSampled.shouldSample(t,e,n,r,i,o):this._remoteParentNotSampled.shouldSample(t,e,n,r,i,o):s.traceFlags&b.SAMPLED?this._localParentSampled.shouldSample(t,e,n,r,i,o):this._localParentNotSampled.shouldSample(t,e,n,r,i,o):this._root.shouldSample(t,e,n,r,i,o)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}const Ze=1;function Qe(){return{sampler:Ye(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128},spanLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128,linkCountLimit:128,eventCountLimit:128,attributePerEventCountLimit:128,attributePerLinkCountLimit:128}}}function Ye(){const t="parentbased_always_on";switch(t){case"always_on":return new ee;case"always_off":return new te;case"parentbased_always_on":return new Ke({root:new ee});case"parentbased_always_off":return new Ke({root:new te});case"traceidratio":return new ne(Je());case"parentbased_traceidratio":return new Ke({root:new ne(Je())});default:return At.error(`OTEL_TRACES_SAMPLER value "${t}" invalid, defaulting to "parentbased_always_on".`),new Ke({root:new ee})}}function Je(){return At.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${Ze}.`),Ze}const tn=1/0;class en{_sampler;_generalLimits;_spanLimits;_idGenerator;instrumentationScope;_resource;_spanProcessor;constructor(t,e,n,r){const i=function(t){const e={sampler:Ye()},n=Qe(),r=Object.assign({},n,e,t);return r.generalLimits=Object.assign({},n.generalLimits,t.generalLimits||{}),r.spanLimits=Object.assign({},n.spanLimits,t.spanLimits||{}),r}(e);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=e.idGenerator||new re,this._resource=n,this._spanProcessor=r,this.instrumentationScope=t}startSpan(t,e={},n=qt.active()){e.root&&(n=X.deleteSpan(n));const r=X.getSpan(n);if(function(t){return!0===t.getValue(Xt)}(n))return At.debug("Instrumentation suppressed, returning Noop Span"),X.wrapSpanContext(x);const i=r?.spanContext(),o=this._idGenerator.generateSpanId();let s,a,u;i&&X.isSpanContextValid(i)?(a=i.traceId,u=i.traceState,s=i):a=this._idGenerator.generateTraceId();const c=e.kind??Te.INTERNAL,l=(e.links??[]).map((t=>({context:t.context,attributes:Ae(t.attributes)}))),d=Ae(e.attributes),p=this._sampler.shouldSample(n,a,t,c,d,l);u=p.traceState??u;const h={traceId:a,spanId:o,traceFlags:p.decision===Ce.RECORD_AND_SAMPLED?b.SAMPLED:b.NONE,traceState:u};if(p.decision===Ce.NOT_RECORD)return At.debug("Recording is off, propagating context in a non-recording span"),X.wrapSpanContext(h);const f=Ae(Object.assign(d,p.attributes));return new Xe({resource:this._resource,scope:this.instrumentationScope,context:n,spanContext:h,name:t,kind:c,links:l,parentSpanContext:s,attributes:f,startTime:e.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits})}startActiveSpan(t,e,n,r){let i,o,s;if(arguments.length<2)return;2===arguments.length?s=e:3===arguments.length?(i=e,s=n):(i=e,o=n,s=r);const a=o??qt.active(),u=this.startSpan(t,i,a),c=X.setSpan(a,u);return qt.with(c,s,void 0,u)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}}class nn{_spanProcessors;constructor(t){this._spanProcessors=t}forceFlush(){const t=[];for(const e of this._spanProcessors)t.push(e.forceFlush());return new Promise((e=>{Promise.all(t).then((()=>{e()})).catch((t=>{Zt(t||new Error("MultiSpanProcessor: forceFlush failed")),e()}))}))}onStart(t,e){for(const n of this._spanProcessors)n.onStart(t,e)}onEnd(t){for(const e of this._spanProcessors)e.onEnd(t)}shutdown(){const t=[];for(const e of this._spanProcessors)t.push(e.shutdown());return new Promise(((e,n)=>{Promise.all(t).then((()=>{e()}),n)}))}}var rn;!function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"}(rn||(rn={}));class on{_config;_tracers=new Map;_resource;_activeSpanProcessor;constructor(t={}){const e=function(...t){let e=t.shift();const n=new WeakMap;for(;t.length>0;)e=be(e,t.shift(),0,n);return e}({},Qe(),function(t){const e=Object.assign({},t.spanLimits);return e.attributeCountLimit=t.spanLimits?.attributeCountLimit??t.generalLimits?.attributeCountLimit??void 0??void 0??128,e.attributeValueLengthLimit=t.spanLimits?.attributeValueLengthLimit??t.generalLimits?.attributeValueLengthLimit??void 0??void 0??tn,Object.assign({},t,{spanLimits:e})}(t));this._resource=e.resource??Ht({[It]:"unknown_service",[$t]:Rt[$t],[jt]:Rt[jt],[Ft]:Rt[Ft]}),this._config=Object.assign({},e,{resource:this._resource});const n=[];t.spanProcessors?.length&&n.push(...t.spanProcessors),this._activeSpanProcessor=new nn(n)}getTracer(t,e,n){const r=`${t}@${e||""}:${n?.schemaUrl||""}`;return this._tracers.has(r)||this._tracers.set(r,new en({name:t,version:e,schemaUrl:n?.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(r)}forceFlush(){const t=this._config.forceFlushTimeoutMillis,e=this._activeSpanProcessor._spanProcessors.map((e=>new Promise((n=>{let r;const i=setTimeout((()=>{n(new Error(`Span processor did not completed within timeout period of ${t} ms`)),r=rn.timeout}),t);e.forceFlush().then((()=>{clearTimeout(i),r!==rn.timeout&&(r=rn.resolved,n(r))})).catch((t=>{clearTimeout(i),r=rn.error,n(t)}))}))));return new Promise(((t,n)=>{Promise.all(e).then((e=>{const r=e.filter((t=>t!==rn.resolved));r.length>0?n(r):t()})).catch((t=>n([t])))}))}shutdown(){return this._activeSpanProcessor.shutdown()}}class sn{_enabled=!1;_currentContext=f;_bindFunction(t=f,e){const n=this,r=function(...r){return n.with(t,(()=>e.apply(this,r)))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),r}active(){return this._currentContext}bind(t,e){return void 0===t&&(t=this.active()),"function"==typeof e?this._bindFunction(t,e):e}disable(){return this._currentContext=f,this._enabled=!1,this}enable(){return this._enabled||(this._enabled=!0,this._currentContext=f),this}with(t,e,n,...r){const i=this._currentContext;this._currentContext=t||f;try{return e.call(n,...r)}finally{this._currentContext=i}}}var an=function(){function t(){}return t.prototype.inject=function(t,e){},t.prototype.extract=function(t,e){return t},t.prototype.fields=function(){return[]},t}(),un={get:function(t,e){if(null!=t)return t[e]},keys:function(t){return null==t?[]:Object.keys(t)}},cn={set:function(t,e,n){null!=t&&(t[e]=n)}},ln=p("OpenTelemetry Baggage Key");function dn(t){return t.getValue(ln)||void 0}function pn(){return dn(E.getInstance().active())}function hn(t,e){return t.setValue(ln,e)}function fn(t){return t.deleteValue(ln)}var mn=function(){function t(t){this._entries=t?new Map(t):new Map}return t.prototype.getEntry=function(t){var e=this._entries.get(t);if(e)return Object.assign({},e)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(t,2);return[e[0],e[1]]}))},t.prototype.setEntry=function(e,n){var r=new t(this._entries);return r._entries.set(e,n),r},t.prototype.removeEntry=function(e){var n=new t(this._entries);return n._entries.delete(e),n},t.prototype.removeEntries=function(){for(var e,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=new t(this._entries);try{for(var s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),a=s.next();!a.done;a=s.next()){var u=a.value;o._entries.delete(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o},t.prototype.clear=function(){return new t},t}(),gn=Symbol("BaggageEntryMetadata"),vn=y.instance();function bn(t){return void 0===t&&(t={}),new mn(new Map(Object.entries(t)))}var _n="propagation",yn=new an,wn=function(){function t(){this.createBaggage=bn,this.getBaggage=dn,this.getActiveBaggage=pn,this.setBaggage=hn,this.deleteBaggage=fn}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(t){return c(_n,t,y.instance())},t.prototype.inject=function(t,e,n){return void 0===n&&(n=cn),this._getGlobalPropagator().inject(t,e,n)},t.prototype.extract=function(t,e,n){return void 0===n&&(n=un),this._getGlobalPropagator().extract(t,e,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){d(_n,y.instance())},t.prototype._getGlobalPropagator=function(){return l(_n)||yn},t}().getInstance();class Sn{_propagators;_fields;constructor(t={}){this._propagators=t.propagators??[],this._fields=Array.from(new Set(this._propagators.map((t=>"function"==typeof t.fields?t.fields():[])).reduce(((t,e)=>t.concat(e)),[])))}inject(t,e,n){for(const r of this._propagators)try{r.inject(t,e,n)}catch(t){At.warn(`Failed to inject with ${r.constructor.name}. Err: ${t.message}`)}}extract(t,e,n){return this._propagators.reduce(((t,r)=>{try{return r.extract(t,e,n)}catch(t){At.warn(`Failed to extract with ${r.constructor.name}. Err: ${t.message}`)}return t}),t)}fields(){return this._fields.slice()}}const En=p("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Tn(t){return!0===t.getValue(En)}const Cn="[_0-9a-z-*/]",xn=new RegExp(`^(?:[a-z]${Cn}{0,255}|[a-z0-9]${Cn}{0,240}@[a-z]${Cn}{0,13})$`),An=/^[ -~]{0,255}[!-~]$/,On=/,|=/;class Ln{_internalState=new Map;constructor(t){t&&this._parse(t)}set(t,e){const n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,e),n}unset(t){const e=this._clone();return e._internalState.delete(t),e}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce(((t,e)=>(t.push(e+"="+this.get(e)),t)),[]).join(",")}_parse(t){t.length>512||(this._internalState=t.split(",").reverse().reduce(((t,e)=>{const n=e.trim(),r=n.indexOf("=");if(-1!==r){const i=n.slice(0,r),o=n.slice(r+1,e.length);(function(t){return xn.test(t)})(i)&&function(t){return An.test(t)&&!On.test(t)}(o)&&t.set(i,o)}return t}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const t=new Ln;return t._internalState=new Map(this._internalState),t}}const Pn="traceparent",kn="tracestate",Rn=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");class Nn{inject(t,e,n){const r=X.getSpanContext(t);if(!r||Tn(t)||!j(r))return;const i=`00-${r.traceId}-${r.spanId}-0${Number(r.traceFlags||b.NONE).toString(16)}`;n.set(e,Pn,i),r.traceState&&n.set(e,kn,r.traceState.serialize())}extract(t,e,n){const r=n.get(e,Pn);if(!r)return t;const i=Array.isArray(r)?r[0]:r;if("string"!=typeof i)return t;const o=function(t){const e=Rn.exec(t);return e?"00"===e[1]&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}:null}(i);if(!o)return t;o.isRemote=!0;const s=n.get(e,kn);if(s){const t=Array.isArray(s)?s.join(","):s;o.traceState=new Ln("string"==typeof t?t:void 0)}return X.setSpanContext(t,o)}fields(){return[Pn,kn]}}const Dn="baggage";class Mn{inject(t,e,n){const r=wn.getBaggage(t);if(!r||Tn(t))return;const i=function(t){return t.getAllEntries().map((([t,e])=>{let n=`${encodeURIComponent(t)}=${encodeURIComponent(e.value)}`;return void 0!==e.metadata&&(n+=";"+e.metadata.toString()),n}))}(r).filter((t=>t.length<=4096)).slice(0,180),o=function(t){return t.reduce(((t,e)=>{const n=`${t}${""!==t?",":""}${e}`;return n.length>8192?t:n}),"")}(i);o.length>0&&n.set(e,Dn,o)}extract(t,e,n){const r=n.get(e,Dn),i=Array.isArray(r)?r.join(","):r;if(!i)return t;const o={};return 0===i.length?t:(i.split(",").forEach((t=>{const e=function(t){const e=t.split(";");if(e.length<=0)return;const n=e.shift();if(!n)return;const r=n.indexOf("=");if(r<=0)return;const i=decodeURIComponent(n.substring(0,r).trim()),o=decodeURIComponent(n.substring(r+1).trim());let s;var a;return e.length>0&&("string"!=typeof(a=e.join(";"))&&(vn.error("Cannot create baggage metadata from unknown type: "+typeof a),a=""),s={__TYPE__:gn,toString:function(){return a}}),{key:i,value:o,metadata:s}}(t);if(e){const t={value:e.value};e.metadata&&(t.metadata=e.metadata),o[e.key]=t}})),0===Object.entries(o).length?t:wn.setBaggage(t,wn.createBaggage(o)))}fields(){return[Dn]}}class In extends on{constructor(t={}){super(t)}register(t={}){var e;X.setGlobalTracerProvider(this),null!==(e=t.propagator)&&(void 0!==e?wn.setGlobalPropagator(e):wn.setGlobalPropagator(new Sn({propagators:[new Nn,new Mn]}))),function(t){if(null!==t){if(void 0===t){const t=new sn;return t.enable(),void qt.setGlobalContextManager(t)}t.enable(),qt.setGlobalContextManager(t)}}(t.contextManager)}}const $n="browser.platform",jn="browser.user_agent",Fn=new class{detect(t){if("undefined"==typeof navigator)return zt();const e=function(){const t={},e=navigator.userAgentData;return e?(t[$n]=e.platform,t["browser.brands"]=e.brands.map((t=>`${t.brand} ${t.version}`)),t["browser.mobile"]=e.mobile):t[jn]=navigator.userAgent,t["browser.language"]=navigator.language,t}();return this._getResourceAttributes(e,t)}_getResourceAttributes(t,e){return t[jn]||t[$n]?{attributes:t}:(At.debug("BrowserDetector failed: Unable to find required browser resources. "),zt())}};var Un,Bn=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Hn=function(){function t(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(console){var r=console[t];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,e)}}}for(var e=0;e<Bn.length;e++)this[Bn[e].n]=t(Bn[e].c)},zn=n(132);class Vn{instrumentationName;instrumentationVersion;_config={};_tracer;_meter;_logger;_diag;constructor(t,e,n){this.instrumentationName=t,this.instrumentationVersion=e,this.setConfig(n),this._diag=At.createComponentLogger({namespace:t}),this._tracer=X.getTracer(t,e),this._meter=gt.getMeter(t,e),this._logger=xt.getLogger(t,e),this._updateMetricInstruments()}_wrap=zn.wrap;_unwrap=zn.unwrap;_massWrap=zn.massWrap;_massUnwrap=zn.massUnwrap;get meter(){return this._meter}setMeterProvider(t){this._meter=t.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}get logger(){return this._logger}setLoggerProvider(t){this._logger=t.getLogger(this.instrumentationName,this.instrumentationVersion)}getModuleDefinitions(){const t=this.init()??[];return Array.isArray(t)?t:[t]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(t){this._config={enabled:!0,...t}}setTracerProvider(t){this._tracer=t.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}_runSpanCustomizationHook(t,e,n,r){if(t)try{t(n,r)}catch(t){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:e},t)}}}class qn extends Vn{constructor(t,e,n){super(t,e,n),this._config.enabled&&this.enable()}}!function(t){t.CONNECT_END="connectEnd",t.CONNECT_START="connectStart",t.DECODED_BODY_SIZE="decodedBodySize",t.DOM_COMPLETE="domComplete",t.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",t.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",t.DOM_INTERACTIVE="domInteractive",t.DOMAIN_LOOKUP_END="domainLookupEnd",t.DOMAIN_LOOKUP_START="domainLookupStart",t.ENCODED_BODY_SIZE="encodedBodySize",t.FETCH_START="fetchStart",t.LOAD_EVENT_END="loadEventEnd",t.LOAD_EVENT_START="loadEventStart",t.NAVIGATION_START="navigationStart",t.REDIRECT_END="redirectEnd",t.REDIRECT_START="redirectStart",t.REQUEST_START="requestStart",t.RESPONSE_END="responseEnd",t.RESPONSE_START="responseStart",t.SECURE_CONNECTION_START="secureConnectionStart",t.START_TIME="startTime",t.UNLOAD_EVENT_END="unloadEventEnd",t.UNLOAD_EVENT_START="unloadEventStart"}(Un||(Un={}));const Gn=performance,Wn=Math.pow(10,6),Xn=Math.pow(10,9);function Kn(t){const e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*Wn)]}function Zn(){let t=Gn.timeOrigin;if("number"!=typeof t){const e=Gn;t=e.timing&&e.timing.fetchStart}return t}function Qn(t){if(e=t,Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])return t;var e,n;if("number"==typeof t)return t<Zn()?(n=t,function(t,e){const n=[t[0]+e[0],t[1]+e[1]];return n[1]>=Xn&&(n[1]-=Xn,n[0]+=1),n}(Kn(Zn()),Kn("number"==typeof n?n:Gn.now()))):Kn(t);if(t instanceof Date)return Kn(t.getTime());throw TypeError("Invalid input type")}function Yn(t){return t[0]*Xn+t[1]}let Jn;function tr(t,e){return e in t}function er(t,e,n,r=!0){if(tr(n,e)&&"number"==typeof n[e]&&(!r||0!==n[e]))return t.addEvent(e,n[e])}function nr(t,e,n=!1,r){void 0===r&&(r=0!==e[Un.START_TIME]),n||(er(t,Un.FETCH_START,e,r),er(t,Un.DOMAIN_LOOKUP_START,e,r),er(t,Un.DOMAIN_LOOKUP_END,e,r),er(t,Un.CONNECT_START,e,r),er(t,Un.SECURE_CONNECTION_START,e,r),er(t,Un.CONNECT_END,e,r),er(t,Un.REQUEST_START,e,r),er(t,Un.RESPONSE_START,e,r),er(t,Un.RESPONSE_END,e,r));const i=e[Un.ENCODED_BODY_SIZE];void 0!==i&&t.setAttribute("http.response_content_length",i);const o=e[Un.DECODED_BODY_SIZE];void 0!==o&&i!==o&&t.setAttribute("http.response_content_length_uncompressed",o)}function rr(){return"undefined"!=typeof location?location.origin:void 0}function ir(t,e,n,r,i=new WeakSet,o){const s=or(t),a=function(t,e,n,r,i,o){const s=Yn(e),a=Yn(n);let u=r.filter((e=>{const n=Yn(Qn(e[Un.FETCH_START])),r=Yn(Qn(e[Un.RESPONSE_END]));return e.initiatorType.toLowerCase()===(o||"xmlhttprequest")&&e.name===t&&n>=s&&r<=a}));return u.length>0&&(u=u.filter((t=>!i.has(t)))),u}(t=s.toString(),e,n,r,i,o);if(0===a.length)return{mainRequest:void 0};if(1===a.length)return{mainRequest:a[0]};const u=function(t){return t.slice().sort(((t,e)=>{const n=t[Un.FETCH_START],r=e[Un.FETCH_START];return n>r?1:n<r?-1:0}))}(a);if(s.origin!==rr()&&u.length>1){let t=u[0],e=function(t,e,n){const r=Yn(n),i=Yn(Qn(e));let o,s=t[1];const a=t.length;for(let e=1;e<a;e++){const n=t[e],a=Yn(Qn(n[Un.FETCH_START])),u=r-Yn(Qn(n[Un.RESPONSE_END]));a>=i&&(!o||u<o)&&(o=u,s=n)}return s}(u,t[Un.RESPONSE_END],n);const r=t[Un.RESPONSE_END];return e[Un.FETCH_START]<r&&(e=t,t=void 0),{corsPreFlightRequest:t,mainRequest:e}}return{mainRequest:a[0]}}function or(t){if("function"==typeof URL)return new URL(t,"undefined"!=typeof document?document.baseURI:"undefined"!=typeof location?location.href:void 0);const e=(Jn||(Jn=document.createElement("a")),Jn);return e.href=t,e}function sr(t,e){if(t.nodeType===Node.DOCUMENT_NODE)return"/";const n=function(t,e){const n=t.nodeType,r=function(t){if(!t.parentNode)return 0;const e=[t.nodeType];t.nodeType===Node.CDATA_SECTION_NODE&&e.push(Node.TEXT_NODE);let n=Array.from(t.parentNode.childNodes);return n=n.filter((n=>{const r=n.localName;return e.indexOf(n.nodeType)>=0&&r===t.localName})),n.length>=1?n.indexOf(t)+1:0}(t);let i="";if(n===Node.ELEMENT_NODE){const n=t.getAttribute("id");if(e&&n)return`//*[@id="${n}"]`;i=t.localName}else if(n===Node.TEXT_NODE||n===Node.CDATA_SECTION_NODE)i="text()";else{if(n!==Node.COMMENT_NODE)return"";i="comment()"}return i&&r>1?`/${i}[${r}]`:`/${i}`}(t,e);if(e&&n.indexOf("@id")>0)return n;let r="";return t.parentNode&&(r+=sr(t.parentNode,!1)),r+=n,r}function ar(t,e){let n=e||[];return("string"==typeof n||n instanceof RegExp)&&(n=[n]),or(t).origin===rr()||n.some((e=>{return n=t,"string"==typeof(r=e)?n===r:!!n.match(r);var n,r}))}const ur="0.17.0",cr="@honeycombio/user-instrumentation",lr=["click"];class dr extends qn{constructor(t={}){var e,n;super(cr,ur,t),this._config=t,this._isEnabled=null!==(e=this._config.enabled)&&void 0!==e&&e,this._listeners=null!==(n=this._listeners)&&void 0!==n?n:[]}init(){}static handleEndSpan(t){var e;null===(e=dr._eventMap.get(t))||void 0===e||e.end()}static createGlobalEventListener(t,e,n){return r=>{const i=r.target;if(!1===n())return;if(dr._eventMap.has(r))return;if(!pr(r,i,t,e))return;const o=sr(i),s=X.getTracer(cr);qt.with(qt.active(),(()=>{s.startActiveSpan(t,{attributes:{event_type:t,target_element:i.tagName,target_xpath:o,"http.url":window.location.href}},(t=>{fr(r,"stopPropagation",t),fr(r,"stopImmediatePropagation",t),dr._eventMap.set(r,t)}))}))}}enable(){var t;if(this._isEnabled)return;const e=this.getRootNode();this._listeners=[],(null!==(t=this._config.eventNames)&&void 0!==t?t:lr).forEach((t=>{const n=dr.createGlobalEventListener(t,this._config.rootNodeId,(()=>this._isEnabled));this._listeners.push({eventName:t,handler:n}),e.addEventListener(t,n,{capture:!0}),e.addEventListener(t,dr.handleEndSpan)})),this._isEnabled=!0}getRootNode(){if(this._config.rootNodeId){const t=document.getElementById(this._config.rootNodeId);return null===t?(this._diag.warn(`Root Node id: ${this._config.rootNodeId} not found!`),document):t}return document}disable(){this._isEnabled=!1,this._listeners.forEach((({eventName:t,handler:e})=>{document.removeEventListener(t,e,{capture:!0}),document.removeEventListener(t,dr.handleEndSpan)})),this._listeners=[]}}dr._eventMap=new WeakMap;const pr=(t,e,n,r)=>e instanceof HTMLElement&&(!!hr(e,`on${n}`,r)&&!!e.getAttribute&&!e.hasAttribute("disabled")),hr=(t,e,n)=>!(!t||n&&t.id===n)&&(!!t[e]||hr(t.parentElement,e,n)),fr=(t,e,n)=>{const r=t[e].bind(t);t[e]=()=>{n.end(),r()}};var mr,gr=n(199);!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(mr||(mr={}));class vr{_delegate;constructor(t){this._delegate=t}export(t,e){this._delegate.export(t,e)}forceFlush(){return this._delegate.forceFlush()}shutdown(){return this._delegate.shutdown()}}function br(t){return{attributes:_r(t.attributes),droppedAttributesCount:0}}function _r(t){return Object.keys(t).map((e=>yr(e,t[e])))}function yr(t,e){return{key:t,value:wr(e)}}function wr(t){const e=typeof t;return"string"===e?{stringValue:t}:"number"===e?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:"boolean"===e?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(wr)}}:"object"===e&&null!=t?{kvlistValue:{values:Object.entries(t).map((([t,e])=>yr(t,e)))}}:{}}Math.pow(10,6);const Sr=Math.pow(10,9);function Er(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function Tr(t){const e=new Uint8Array(t.length/2);let n=0;for(let r=0;r<t.length;r+=2){const i=Er(t.charCodeAt(r)),o=Er(t.charCodeAt(r+1));e[n++]=i<<4|o}return e}function Cr(t){const e=BigInt(1e9);return BigInt(t[0])*e+BigInt(t[1])}function xr(t){return e=Cr(t),{low:Number(BigInt.asUintN(32,e)),high:Number(BigInt.asUintN(32,e>>BigInt(32)))};var e}const Ar="undefined"!=typeof BigInt?function(t){return Cr(t).toString()}:function(t){return t[0]*Sr+t[1]};function Or(t){return t}function Lr(t){if(void 0!==t)return Tr(t)}const Pr={encodeHrTime:xr,encodeSpanContext:Tr,encodeOptionalSpanContext:Lr};function kr(t,e){const n=t.spanContext(),r=t.status,i=t.parentSpanContext?.spanId?e.encodeSpanContext(t.parentSpanContext?.spanId):void 0;return{traceId:e.encodeSpanContext(n.traceId),spanId:e.encodeSpanContext(n.spanId),parentSpanId:i,traceState:n.traceState?.serialize(),name:t.name,kind:null==t.kind?0:t.kind+1,startTimeUnixNano:e.encodeHrTime(t.startTime),endTimeUnixNano:e.encodeHrTime(t.endTime),attributes:_r(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map((t=>function(t,e){return{attributes:t.attributes?_r(t.attributes):[],name:t.name,timeUnixNano:e.encodeHrTime(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}(t,e))),droppedEventsCount:t.droppedEventsCount,status:{code:r.code,message:r.message},links:t.links.map((t=>function(t,e){return{attributes:t.attributes?_r(t.attributes):[],spanId:e.encodeSpanContext(t.context.spanId),traceId:e.encodeSpanContext(t.context.traceId),traceState:t.context.traceState?.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}(t,e))),droppedLinksCount:t.droppedLinksCount}}function Rr(t,e){const n=function(t){const e=new Map;for(const n of t){let t=e.get(n.resource);t||(t=new Map,e.set(n.resource,t));const r=`${n.instrumentationScope.name}@${n.instrumentationScope.version||""}:${n.instrumentationScope.schemaUrl||""}`;let i=t.get(r);i||(i=[],t.set(r,i)),i.push(n)}return e}(t),r=[],i=n.entries();let o=i.next();for(;!o.done;){const[t,n]=o.value,a=[],u=n.values();let c=u.next();for(;!c.done;){const t=c.value;if(t.length>0){const n=t.map((t=>kr(t,e)));a.push({scope:(s=t[0].instrumentationScope,{name:s.name,version:s.version}),spans:n,schemaUrl:t[0].instrumentationScope.schemaUrl})}c=u.next()}const l={resource:br(t),scopeSpans:a,schemaUrl:void 0};r.push(l),o=i.next()}var s;return r}const Nr={serializeRequest:t=>{const e=function(t,e){const n=function(t){if(void 0===t)return Pr;const e=t.useLongBits??!0,n=t.useHex??!1;return{encodeHrTime:e?xr:Ar,encodeSpanContext:n?Or:Tr,encodeOptionalSpanContext:n?Or:Lr}}(e);return{resourceSpans:Rr(t,n)}}(t,{useHex:!0,useLongBits:!1});return(new TextEncoder).encode(JSON.stringify(e))},deserializeResponse:t=>{const e=new TextDecoder;return JSON.parse(e.decode(t))}};class Dr{_transport;constructor(t){this._transport=t}retry(t,e,n){return new Promise(((r,i)=>{setTimeout((()=>{this._transport.send(t,e).then(r,i)}),n)}))}async send(t,e){const n=Date.now()+e;let r=await this._transport.send(t,e),i=5,o=1e3;for(;"retryable"===r.status&&i>0;){i--;const e=Math.max(Math.min(o,5e3)+(.4*Math.random()-.2),0);o*=1.5;const s=r.retryInMillis??e,a=n-Date.now();if(s>a)return r;r=await this.retry(t,a,s)}return r}shutdown(){return this._transport.shutdown()}}function Mr(t){return new Dr(t.transport)}function Ir(t){if(null==t)return;const e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?1e3*e:-1;const n=new Date(t).getTime()-Date.now();return n>=0?n:0}class $r{_parameters;constructor(t){this._parameters=t}send(t,e){return new Promise((n=>{const r=new XMLHttpRequest;r.timeout=e,r.open("POST",this._parameters.url);const i=this._parameters.headers();Object.entries(i).forEach((([t,e])=>{r.setRequestHeader(t,e)})),r.ontimeout=t=>{n({status:"failure",error:new Error("XHR request timed out")})},r.onreadystatechange=()=>{var t;r.status>=200&&r.status<=299?(At.debug("XHR success"),n({status:"success"})):r.status&&(t=r.status,[429,502,503,504].includes(t))?n({status:"retryable",retryInMillis:Ir(r.getResponseHeader("Retry-After"))}):0!==r.status&&n({status:"failure",error:new Error("XHR request failed with non-retryable status")})},r.onabort=()=>{n({status:"failure",error:new Error("XHR request aborted")})},r.onerror=()=>{n({status:"failure",error:new Error("XHR request errored")})},r.send(t)}))}shutdown(){}}class jr{_params;constructor(t){this._params=t}send(t){return new Promise((e=>{navigator.sendBeacon(this._params.url,new Blob([t],{type:this._params.blobType}))?(At.debug("SendBeacon success"),e({status:"success"})):e({status:"failure",error:new Error("SendBeacon failed")})}))}shutdown(){}}class Fr{_concurrencyLimit;_sendingPromises=[];constructor(t){this._concurrencyLimit=t}pushPromise(t){if(this.hasReachedLimit())throw new Error("Concurrency Limit reached");this._sendingPromises.push(t);const e=()=>{const e=this._sendingPromises.indexOf(t);this._sendingPromises.splice(e,1)};t.then(e,e)}hasReachedLimit(){return this._sendingPromises.length>=this._concurrencyLimit}async awaitAll(){await Promise.all(this._sendingPromises)}}function Ur(t){return new Fr(t.concurrencyLimit)}var Br;!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(Br||(Br={}));class Hr extends Error{code;name="OTLPExporterError";data;constructor(t,e,n){super(t),this.data=n,this.code=e}}class zr{_transport;_serializer;_responseHandler;_promiseQueue;_timeout;_diagLogger;constructor(t,e,n,r,i){this._transport=t,this._serializer=e,this._responseHandler=n,this._promiseQueue=r,this._timeout=i,this._diagLogger=At.createComponentLogger({namespace:"OTLPExportDelegate"})}export(t,e){if(this._diagLogger.debug("items to be sent",t),this._promiseQueue.hasReachedLimit())return void e({code:Br.FAILED,error:new Error("Concurrent export limit reached")});const n=this._serializer.serializeRequest(t);null!=n?this._promiseQueue.pushPromise(this._transport.send(n,this._timeout).then((t=>{if("success"!==t.status)"failure"===t.status&&t.error?e({code:Br.FAILED,error:t.error}):"retryable"===t.status?e({code:Br.FAILED,error:new Hr("Export failed with retryable status")}):e({code:Br.FAILED,error:new Hr("Export failed with unknown error")});else{if(null!=t.data)try{this._responseHandler.handleResponse(this._serializer.deserializeResponse(t.data))}catch(e){this._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",e,t.data)}e({code:Br.SUCCESS})}}),(t=>e({code:Br.FAILED,error:t})))):e({code:Br.FAILED,error:new Error("Nothing to send")})}forceFlush(){return this._promiseQueue.awaitAll()}async shutdown(){this._diagLogger.debug("shutdown started"),await this.forceFlush(),this._transport.shutdown()}}function Vr(t,e,n){return r={transport:n,serializer:e,promiseHandler:Ur(t)},i={timeout:t.timeoutMillis},new zr(r.transport,r.serializer,{handleResponse(t){null!=t&&function(t){return Object.prototype.hasOwnProperty.call(t,"partialSuccess")}(t)&&null!=t.partialSuccess&&0!==Object.keys(t.partialSuccess).length&&At.warn("Received Partial Success response:",JSON.stringify(t.partialSuccess))}},r.promiseHandler,i.timeout);var r,i}function qr(t){if(Number.isFinite(t)&&t>0)return t;throw new Error(`Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '${t}')`)}function Gr(t){if(null!=t)return()=>t}function Wr(t,e,n){return{timeoutMillis:qr(t.timeoutMillis??e.timeoutMillis??n.timeoutMillis),concurrencyLimit:t.concurrencyLimit??e.concurrencyLimit??n.concurrencyLimit,compression:t.compression??e.compression??n.compression}}function Xr(t,e,n){const r={...n()},i={};return()=>(null!=e&&Object.assign(i,e()),null!=t&&Object.assign(i,t()),Object.assign(i,r))}function Kr(t){if(null!=t)try{return new URL(t),t}catch(e){throw new Error(`Configuration: Could not parse user-provided export URL: '${t}'`)}}function Zr(t,e,n,r){const i=!!t.headers||"function"!=typeof navigator.sendBeacon,o=function(t,e,n){return r={url:t.url,timeoutMillis:t.timeoutMillis,headers:Gr(t.headers),concurrencyLimit:t.concurrencyLimit},i={},o=function(t,e){return{timeoutMillis:1e4,concurrencyLimit:30,compression:"none",headers:()=>t,url:"http://localhost:4318/"+e,agentOptions:{keepAlive:!0}}}(n,e),{...Wr(r,i,o),headers:Xr((s=r.headers,()=>{const t={};return Object.entries(s?.()??{}).forEach((([e,n])=>{void 0!==n?t[e]=String(n):At.warn(`Header "${e}" has invalid value (${n}) and will be ignored`)})),t}),i.headers,o.headers),url:Kr(r.url)??i.url??o.url,agentOptions:r.agentOptions??i.agentOptions??o.agentOptions};var r,i,o,s}(t,n,r);return i?function(t,e){return Vr(t,e,Mr({transport:(n=t,new $r(n))}));var n}(o,e):function(t,e){return Vr(t,e,Mr({transport:(n={url:t.url,blobType:t.headers()["Content-Type"]},new jr(n))}));var n}(o,e)}class Qr extends vr{constructor(t={}){super(Zr(t,Nr,"v1/traces",{"Content-Type":"application/json"}))}}class Yr{_sessionIdProvider;constructor(t){this._sessionIdProvider=t}async forceFlush(){}onStart(t,e){const n=this._sessionIdProvider?.getSessionId();n&&t.setAttribute("session.id",n)}onEnd(t){}async shutdown(){}}var Jr=n(232),ti=n.n(Jr);class ei{constructor(t={}){var e,n,r;if(this._resource=null!==(e=t.resource)&&void 0!==e?e:Ht({}),this._resourceDetectors=null!==(n=t.resourceDetectors)&&void 0!==n?n:[Fn],this._serviceName=t.serviceName,this._autoDetectResources=null===(r=t.autoDetectResources)||void 0===r||r,t.spanProcessor||t.traceExporter||t.spanProcessors){const e={};t.sampler&&(e.sampler=t.sampler),t.spanLimits&&(e.spanLimits=t.spanLimits),t.idGenerator&&(e.idGenerator=t.idGenerator);const n=t.spanProcessors||[];t.traceExporter&&n.push(new Yt(t.traceExporter)),this._tracerProviderConfig={tracerConfig:e,spanProcessor:t.spanProcessor,spanProcessors:n,contextManager:t.contextManager,textMapPropagator:t.textMapPropagator}}let i=[];t.instrumentations&&(i=t.instrumentations),this._instrumentations=i}start(){var t,e,n,r,i;if(this._disabled)return;if(function(t){const e=t.tracerProvider||X.getTracerProvider(),n=t.meterProvider||gt.getMeterProvider(),r=t.loggerProvider||xt.getLoggerProvider();!function(t,e,n,r){for(let i=0,o=t.length;i<o;i++){const o=t[i];e&&o.setTracerProvider(e),n&&o.setMeterProvider(n),r&&o.setLoggerProvider&&o.setLoggerProvider(r),o.getConfig().enabled||o.enable()}}(t.instrumentations?.flat()??[],e,n,r)}({instrumentations:this._instrumentations}),this._autoDetectResources){const t={detectors:this._resourceDetectors};this._resource=this._resource.merge(((t={})=>{const e=(t.detectors||[]).map((e=>{try{const r=(n=e.detect(t),new Bt(n));return At.debug(`${e.constructor.name} found resource.`,r),r}catch(t){return At.debug(`${e.constructor.name} failed: ${t.message}`),zt()}var n}));return Vt(e),e.reduce(((t,e)=>t.merge(e)),zt())})(t))}this._resource=void 0===this._serviceName?this._resource:this._resource.merge(Ht({[It]:this._serviceName}));const o=[];(null===(t=this._tracerProviderConfig)||void 0===t?void 0:t.spanProcessor)&&o.push(this._tracerProviderConfig.spanProcessor),(null===(e=this._tracerProviderConfig)||void 0===e?void 0:e.spanProcessors)&&o.push(...this._tracerProviderConfig.spanProcessors);const s=new In(Object.assign(Object.assign({},null===(n=this._tracerProviderConfig)||void 0===n?void 0:n.tracerConfig),{resource:this._resource,spanProcessors:o}));this._tracerProvider=s,s.register({contextManager:null===(r=this._tracerProviderConfig)||void 0===r?void 0:r.contextManager,propagator:null===(i=this._tracerProviderConfig)||void 0===i?void 0:i.textMapPropagator})}getResourceAttributes(){return this._resource.attributes}shutdown(){const t=[];return this._tracerProvider&&t.push(this._tracerProvider.shutdown()),Promise.all(t).then((()=>{}))}}const ni="v1/traces",ri=`https://api.honeycomb.io/${ni}`,ii={apiKey:"",tracesApiKey:"",endpoint:ri,tracesEndpoint:ri,serviceName:"unknown_service",debug:!1,sampleRate:1,skipOptionsValidation:!1,localVisualizations:!1,webVitalsInstrumentationConfig:{enabled:!0}},oi=t=>`@honeycombio/opentelemetry-web: ${t}`,si=/^[a-f0-9]*$/,ai=/^hc[a-z]ic_[a-z0-9]*$/;function ui(t){return null!=t&&0!==t.length&&(32===t.length?si.test(t):64===t.length&&ai.test(t))}const ci=t=>{return(null==t?void 0:t.tracesEndpoint)?t.tracesEndpoint:(null==t?void 0:t.endpoint)?(e=t.endpoint).endsWith(ni)||e.endsWith(`${ni}/`)?e:e.endsWith("/")?e+ni:e+"/"+ni:ri;var e},li=t=>(null==t?void 0:t.tracesApiKey)||(null==t?void 0:t.apiKey),di=t=>"number"==typeof(null==t?void 0:t.sampleRate)&&Number.isSafeInteger(null==t?void 0:t.sampleRate)&&(null==t?void 0:t.sampleRate)>=0?null==t?void 0:t.sampleRate:1,pi=oi("❌ Missing API Key. Set `apiKey` in HoneycombOptions. Telemetry will not be exported."),hi=oi(`❌ Missing Service Name. Set \`serviceName\` in HoneycombOptions. Defaulting to '${ii.serviceName}'`),fi=oi("🔕 Dataset is ignored in favor of service name."),mi=oi("❌ Missing dataset. Specify either HONEYCOMB_DATASET environment variable or dataset in the options parameter."),gi=oi("⏭️ Skipping options validation. To re-enable, set skipOptionsValidation option or HONEYCOMB_SKIP_OPTIONS_VALIDATION to false."),vi=oi("⏭️ Skipping options validation, because a custom collector is being used."),bi=oi("🔨 Default deterministic sampler has been overridden. Honeycomb requires a resource attribute called SampleRate to properly show weighted values. Non-deterministic sampleRate could lead to missing spans in Honeycomb. See our docs for more details. https://docs.honeycomb.io/getting-data-in/opentelemetry/node-distro/#sampling-without-the-honeycomb-sdk"),_i=oi("🔕 Disabling local visualizations - must have both service name and API key configured."),yi=oi("🔕 Disabling local visualizations - cannot infer auth and ui url roots from endpoint url."),wi=oi("🔕 Failed to get proper auth response from Honeycomb. No local visualization available."),Si=oi("🔕 Default honeycomb exporter disabled but no exporters provided");const Ei=t=>{const e=di(t);return new Ti(e)};class Ti{constructor(t){switch(this._sampleRate=t,t){case 0:this._sampler=new te;break;case 1:this._sampler=new ee;break;default:{const e=1/t;this._sampler=new ne(e);break}}}shouldSample(t,e,n,r,i,o){const s=this._sampler.shouldSample(t,e,n,r,i,o);return Object.assign(Object.assign({},s),{attributes:Object.assign(Object.assign({},s.attributes),{SampleRate:this._sampleRate})})}toString(){return`DeterministicSampler(${this._sampler.toString()})`}}var Ci,xi,Ai=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Oi=function(t){if("loading"===document.readyState)return"loading";var e=Ai();if(e){if(t<e.domInteractive)return"loading";if(0===e.domContentLoadedEventStart||t<e.domContentLoadedEventStart)return"dom-interactive";if(0===e.domComplete||t<e.domComplete)return"dom-content-loaded"}return"complete"},Li=function(t){var e=t.nodeName;return 1===t.nodeType?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},Pi=function(t,e){var n="";try{for(;t&&9!==t.nodeType;){var r=t,i=r.id?"#"+r.id:Li(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+i.length>(e||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;t=r.parentNode}}catch(t){}return n},ki=-1,Ri=function(){return ki},Ni=function(t){addEventListener("pageshow",(function(e){e.persisted&&(ki=e.timeStamp,t(e))}),!0)},Di=function(){var t=Ai();return t&&t.activationStart||0},Mi=function(t,e){var n=Ai(),r="navigate";return Ri()>=0?r="back-forward-cache":n&&(document.prerendering||Di()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Ii=function(t,e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver((function(t){Promise.resolve().then((function(){e(t.getEntries())}))}));return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch(t){}},$i=function(t,e,n,r){var i,o;return function(s){e.value>=0&&(s||r)&&((o=e.value-(i||0))||void 0===i)&&(i=e.value,e.delta=o,e.rating=function(t,e){return t>e[1]?"poor":t>e[0]?"needs-improvement":"good"}(e.value,n),t(e))}},ji=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},Fi=function(t){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t()}))},Ui=function(t){var e=!1;return function(){e||(t(),e=!0)}},Bi=-1,Hi=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},zi=function(t){"hidden"===document.visibilityState&&Bi>-1&&(Bi="visibilitychange"===t.type?t.timeStamp:0,qi())},Vi=function(){addEventListener("visibilitychange",zi,!0),addEventListener("prerenderingchange",zi,!0)},qi=function(){removeEventListener("visibilitychange",zi,!0),removeEventListener("prerenderingchange",zi,!0)},Gi=function(){return Bi<0&&(Bi=Hi(),Vi(),Ni((function(){setTimeout((function(){Bi=Hi(),Vi()}),0)}))),{get firstHiddenTime(){return Bi}}},Wi=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},Xi=[1800,3e3],Ki=function(t,e){e=e||{},Wi((function(){var n,r=Gi(),i=Mi("FCP"),o=Ii("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(o.disconnect(),t.startTime<r.firstHiddenTime&&(i.value=Math.max(t.startTime-Di(),0),i.entries.push(t),n(!0)))}))}));o&&(n=$i(t,i,Xi,e.reportAllChanges),Ni((function(r){i=Mi("FCP"),n=$i(t,i,Xi,e.reportAllChanges),ji((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))},Zi=[.1,.25],Qi=0,Yi=1/0,Ji=0,to=function(t){t.forEach((function(t){t.interactionId&&(Yi=Math.min(Yi,t.interactionId),Ji=Math.max(Ji,t.interactionId),Qi=Ji?(Ji-Yi)/7+1:0)}))},eo=function(){return Ci?Qi:performance.interactionCount||0},no=function(){"interactionCount"in performance||Ci||(Ci=Ii("event",to,{type:"event",buffered:!0,durationThreshold:0}))},ro=[],io=new Map,oo=0,so=[],ao=function(t){if(so.forEach((function(e){return e(t)})),t.interactionId||"first-input"===t.entryType){var e=ro[ro.length-1],n=io.get(t.interactionId);if(n||ro.length<10||t.duration>e.latency){if(n)t.duration>n.latency?(n.entries=[t],n.latency=t.duration):t.duration===n.latency&&t.startTime===n.entries[0].startTime&&n.entries.push(t);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};io.set(r.id,r),ro.push(r)}ro.sort((function(t,e){return e.latency-t.latency})),ro.length>10&&ro.splice(10).forEach((function(t){return io.delete(t.id)}))}}},uo=function(t){var e=self.requestIdleCallback||self.setTimeout,n=-1;return t=Ui(t),"hidden"===document.visibilityState?t():(n=e(t),Fi(t)),n},co=[200,500],lo=[],po=[],ho=0,fo=new WeakMap,mo=new Map,go=-1,vo=function(t){lo=lo.concat(t),bo()},bo=function(){go<0&&(go=uo(_o))},_o=function(){mo.size>10&&mo.forEach((function(t,e){io.has(e)||mo.delete(e)}));var t=ro.map((function(t){return fo.get(t.entries[0])})),e=po.length-50;po=po.filter((function(n,r){return r>=e||t.includes(n)}));for(var n=new Set,r=0;r<po.length;r++){var i=po[r];To(i.startTime,i.processingEnd).forEach((function(t){n.add(t)}))}var o=lo.length-1-50;lo=lo.filter((function(t,e){return t.startTime>ho&&e>o||n.has(t)})),go=-1};so.push((function(t){t.interactionId&&t.target&&!mo.has(t.interactionId)&&mo.set(t.interactionId,t.target)}),(function(t){var e,n=t.startTime+t.duration;ho=Math.max(ho,t.processingEnd);for(var r=po.length-1;r>=0;r--){var i=po[r];if(Math.abs(n-i.renderTime)<=8){(e=i).startTime=Math.min(t.startTime,e.startTime),e.processingStart=Math.min(t.processingStart,e.processingStart),e.processingEnd=Math.max(t.processingEnd,e.processingEnd),e.entries.push(t);break}}e||(e={startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd,renderTime:n,entries:[t]},po.push(e)),(t.interactionId||"first-input"===t.entryType)&&fo.set(t,e),bo()}));var yo,wo,So,Eo,To=function(t,e){for(var n,r=[],i=0;n=lo[i];i++)if(!(n.startTime+n.duration<t)){if(n.startTime>e)break;r.push(n)}return r},Co=[2500,4e3],xo={},Ao=[800,1800],Oo=function t(e){document.prerendering?Wi((function(){return t(e)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(e)}),!0):setTimeout(e,0)},Lo=function(t,e){e=e||{};var n=Mi("TTFB"),r=$i(t,n,Ao,e.reportAllChanges);Oo((function(){var i=Ai();i&&(n.value=Math.max(i.responseStart-Di(),0),n.entries=[i],r(!0),Ni((function(){n=Mi("TTFB",0),(r=$i(t,n,Ao,e.reportAllChanges))(!0)})))}))},Po={passive:!0,capture:!0},ko=new Date,Ro=function(t,e){yo||(yo=e,wo=t,So=new Date,Mo(removeEventListener),No())},No=function(){if(wo>=0&&wo<So-ko){var t={entryType:"first-input",name:yo.type,target:yo.target,cancelable:yo.cancelable,startTime:yo.timeStamp,processingStart:yo.timeStamp+wo};Eo.forEach((function(e){e(t)})),Eo=[]}},Do=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,e){var n=function(){Ro(t,e),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,Po),removeEventListener("pointercancel",r,Po)};addEventListener("pointerup",n,Po),addEventListener("pointercancel",r,Po)}(e,t):Ro(e,t)}},Mo=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(e){return t(e,Do,Po)}))},Io=[100,300];class $o{constructor(t,e,n={}){this.instrumentationName=t,this.instrumentationVersion=e,this._wrap=zn.wrap,this._unwrap=zn.unwrap,this._massWrap=zn.massWrap,this._massUnwrap=zn.massUnwrap,this._config=Object.assign({enabled:!0},n),this._diag=At.createComponentLogger({namespace:t}),this._tracer=X.getTracer(t,e),this._meter=gt.getMeter(t,e),this._updateMetricInstruments()}get meter(){return this._meter}setMeterProvider(t){this._meter=t.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(t={}){this._config=Object.assign({},t)}setTracerProvider(t){this._tracer=t.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}}class jo extends $o{constructor({enabled:t=!0,vitalsToTrack:e=["CLS","LCP","INP","TTFB","FCP"],lcp:n,cls:r,inp:i,fid:o,fcp:s,ttfb:a}={}){super("@honeycombio/instrumentation-web-vitals",ur,{enabled:t,vitalsToTrack:e,lcp:n,cls:r,inp:i,fid:o,fcp:s,ttfb:a}),this.onReportCLS=(t,e={})=>{const{applyCustomAttributes:n}=e;if(!this.isEnabled())return;const{name:r,attribution:i}=t,{largestShiftTarget:o,largestShiftTime:s,largestShiftValue:a,loadState:u,largestShiftEntry:c}=i,l=this.getAttrPrefix(r),d=this.tracer.startSpan(r);d.setAttributes(Object.assign(Object.assign({},this.getSharedAttributes(t)),{[`${l}.largest_shift_target`]:o,[`${l}.element`]:o,[`${l}.largest_shift_time`]:s,[`${l}.largest_shift_value`]:a,[`${l}.load_state`]:u,[`${l}.had_recent_input`]:null==c?void 0:c.hadRecentInput})),n&&n(t,d),d.end()},this.onReportLCP=(t,e={})=>{const{applyCustomAttributes:n,dataAttributes:r}=e;if(!this.isEnabled())return;const{name:i,attribution:o}=t,{element:s,url:a,timeToFirstByte:u,resourceLoadDelay:c,resourceLoadDuration:l,elementRenderDelay:d,lcpEntry:p}=o,h=this.getAttrPrefix(i),f=this.tracer.startSpan(i);f.setAttributes(Object.assign(Object.assign({},this.getSharedAttributes(t)),{[`${h}.element`]:s,[`${h}.url`]:a,[`${h}.time_to_first_byte`]:u,[`${h}.resource_load_delay`]:c,[`${h}.resource_load_duration`]:l,[`${h}.element_render_delay`]:d,[`${h}.resource_load_time`]:l}));const m=null==p?void 0:p.element;if(null==m?void 0:m.dataset)for(const t in m.dataset){const e=m.dataset[t];void 0===e||void 0!==r&&!r.includes(t)||f.setAttribute(`${h}.element.data.${t}`,e)}n&&n(t,f),f.end()},this.onReportINP=(t,e={includeTimingsAsSpans:!1})=>{const{applyCustomAttributes:n,includeTimingsAsSpans:r}=e;if(!this.isEnabled())return;const{name:i,attribution:o}=t,{inputDelay:s,interactionTarget:a,interactionTime:u,interactionType:c,loadState:l,nextPaintTime:d,presentationDelay:p,processingDuration:h,longAnimationFrameEntries:f}=o,m=f,g=this.getAttrPrefix(i),v=s+h+p;this.tracer.startActiveSpan(i,{startTime:u},(e=>{const i=Object.assign(Object.assign({},this.getSharedAttributes(t)),{[`${g}.input_delay`]:s,[`${g}.interaction_target`]:a,[`${g}.interaction_time`]:u,[`${g}.interaction_type`]:c,[`${g}.load_state`]:l,[`${g}.next_paint_time`]:d,[`${g}.presentation_delay`]:p,[`${g}.processing_duration`]:h,[`${g}.duration`]:v,[`${g}.element`]:a,[`${g}.event_type`]:c});e.setAttributes(i),n&&n(t,e),r&&m.forEach((t=>{this.processPerformanceLongAnimationFrameTimingSpans(g,t)})),e.end(u+v)}))},this.onReportFCP=(t,e={})=>{const{applyCustomAttributes:n}=e;if(!this.isEnabled())return;const{name:r,attribution:i}=t,{timeToFirstByte:o,firstByteToFCP:s,loadState:a}=i,u=this.getAttrPrefix(r),c=this.tracer.startSpan(r);c.setAttributes(Object.assign(Object.assign({},this.getSharedAttributes(t)),{[`${u}.time_to_first_byte`]:o,[`${u}.time_since_first_byte`]:s,[`${u}.load_state`]:a})),n&&n(t,c),c.end()},this.onReportFID=(t,e={})=>{const{applyCustomAttributes:n}=e;if(!this.isEnabled())return;const{name:r,attribution:i}=t,{eventTarget:o,eventType:s,loadState:a}=i,u=this.getAttrPrefix(r),c=this.tracer.startSpan(r);c.setAttributes(Object.assign(Object.assign({},this.getSharedAttributes(t)),{[`${u}.element`]:o,[`${u}.event_type`]:s,[`${u}.load_state`]:a})),n&&n(t,c),c.end()},this.onReportTTFB=(t,e={})=>{const{applyCustomAttributes:n}=e;if(!this.isEnabled())return;const{name:r,attribution:i}=t,{cacheDuration:o,connectionDuration:s,dnsDuration:a,requestDuration:u,waitingDuration:c}=i,l=this.getAttrPrefix(r),d=Object.assign(Object.assign({},this.getSharedAttributes(t)),{[`${l}.waiting_duration`]:c,[`${l}.dns_duration`]:a,[`${l}.connection_duration`]:s,[`${l}.request_duration`]:u,[`${l}.cache_duration`]:o,[`${l}.waiting_time`]:c,[`${l}.dns_time`]:a,[`${l}.connection_time`]:s,[`${l}.request_time`]:u}),p=this.tracer.startSpan(r);p.setAttributes(d),n&&n(t,p),p.end()},this.vitalsToTrack=[...e],this.lcpOpts=n,this.clsOpts=r,this.inpOpts=i,this.fidOpts=o,this.fcpOpts=s,this.ttfbOpts=a,this._isEnabled=t,this._setupWebVitalsCallbacks()}init(){}_setupWebVitalsCallbacks(){this.vitalsToTrack.includes("CLS")&&function(t,e){!function(t,e){e=e||{},Ki(Ui((function(){var n,r=Mi("CLS",0),i=0,o=[],s=function(t){t.forEach((function(t){if(!t.hadRecentInput){var e=o[0],n=o[o.length-1];i&&t.startTime-n.startTime<1e3&&t.startTime-e.startTime<5e3?(i+=t.value,o.push(t)):(i=t.value,o=[t])}})),i>r.value&&(r.value=i,r.entries=o,n())},a=Ii("layout-shift",s);a&&(n=$i(t,r,Zi,e.reportAllChanges),Fi((function(){s(a.takeRecords()),n(!0)})),Ni((function(){i=0,r=Mi("CLS",0),n=$i(t,r,Zi,e.reportAllChanges),ji((function(){return n()}))})),setTimeout(n,0))})))}((function(e){var n=function(t){var e,n={};if(t.entries.length){var r=t.entries.reduce((function(t,e){return t&&t.value>e.value?t:e}));if(r&&r.sources&&r.sources.length){var i=(e=r.sources).find((function(t){return t.node&&1===t.node.nodeType}))||e[0];i&&(n={largestShiftTarget:Pi(i.node),largestShiftTime:r.startTime,largestShiftValue:r.value,largestShiftSource:i,largestShiftEntry:r,loadState:Oi(r.startTime)})}}return Object.assign(t,{attribution:n})}(e);t(n)}),e)}((t=>{this.onReportCLS(t,this.clsOpts)}),this.clsOpts),this.vitalsToTrack.includes("LCP")&&function(t,e){!function(t,e){e=e||{},Wi((function(){var n,r=Gi(),i=Mi("LCP"),o=function(t){e.reportAllChanges||(t=t.slice(-1)),t.forEach((function(t){t.startTime<r.firstHiddenTime&&(i.value=Math.max(t.startTime-Di(),0),i.entries=[t],n())}))},s=Ii("largest-contentful-paint",o);if(s){n=$i(t,i,Co,e.reportAllChanges);var a=Ui((function(){xo[i.id]||(o(s.takeRecords()),s.disconnect(),xo[i.id]=!0,n(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,(function(){return uo(a)}),{once:!0,capture:!0})})),Fi(a),Ni((function(r){i=Mi("LCP"),n=$i(t,i,Co,e.reportAllChanges),ji((function(){i.value=performance.now()-r.timeStamp,xo[i.id]=!0,n(!0)}))}))}}))}((function(e){var n=function(t){var e={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:t.value};if(t.entries.length){var n=Ai();if(n){var r=n.activationStart||0,i=t.entries[t.entries.length-1],o=i.url&&performance.getEntriesByType("resource").filter((function(t){return t.name===i.url}))[0],s=Math.max(0,n.responseStart-r),a=Math.max(s,o?(o.requestStart||o.startTime)-r:0),u=Math.max(a,o?o.responseEnd-r:0),c=Math.max(u,i.startTime-r);e={element:Pi(i.element),timeToFirstByte:s,resourceLoadDelay:a-s,resourceLoadDuration:u-a,elementRenderDelay:c-u,navigationEntry:n,lcpEntry:i},i.url&&(e.url=i.url),o&&(e.lcpResourceEntry=o)}}return Object.assign(t,{attribution:e})}(e);t(n)}),e)}((t=>{this.onReportLCP(t,this.lcpOpts)}),this.lcpOpts),this.vitalsToTrack.includes("INP")&&function(t,e){xi||(xi=Ii("long-animation-frame",vo)),function(t,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},Wi((function(){var n;no();var r,i=Mi("INP"),o=function(t){uo((function(){t.forEach(ao);var e=function(){var t=Math.min(ro.length-1,Math.floor((eo()-oo)/50));return ro[t]}();e&&e.latency!==i.value&&(i.value=e.latency,i.entries=e.entries,r())}))},s=Ii("event",o,{durationThreshold:null!==(n=e.durationThreshold)&&void 0!==n?n:40});r=$i(t,i,co,e.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),Fi((function(){o(s.takeRecords()),r(!0)})),Ni((function(){oo=eo(),ro.length=0,io.clear(),i=Mi("INP"),r=$i(t,i,co,e.reportAllChanges)})))})))}((function(e){var n=function(t){var e=t.entries[0],n=fo.get(e),r=e.processingStart,i=n.processingEnd,o=n.entries.sort((function(t,e){return t.processingStart-e.processingStart})),s=To(e.startTime,i),a=t.entries.find((function(t){return t.target})),u=a&&a.target||mo.get(e.interactionId),c=[e.startTime+e.duration,i].concat(s.map((function(t){return t.startTime+t.duration}))),l=Math.max.apply(Math,c),d={interactionTarget:Pi(u),interactionTargetElement:u,interactionType:e.name.startsWith("key")?"keyboard":"pointer",interactionTime:e.startTime,nextPaintTime:l,processedEventEntries:o,longAnimationFrameEntries:s,inputDelay:r-e.startTime,processingDuration:i-r,presentationDelay:Math.max(l-i,0),loadState:Oi(e.startTime)};return Object.assign(t,{attribution:d})}(e);t(n)}),e)}((t=>{this.onReportINP(t,this.inpOpts)}),this.inpOpts),this.vitalsToTrack.includes("FID")&&function(t,e){!function(t,e){e=e||{},Wi((function(){var n,r=Gi(),i=Mi("FID"),o=function(t){t.startTime<r.firstHiddenTime&&(i.value=t.processingStart-t.startTime,i.entries.push(t),n(!0))},s=function(t){t.forEach(o)},a=Ii("first-input",s);n=$i(t,i,Io,e.reportAllChanges),a&&(Fi(Ui((function(){s(a.takeRecords()),a.disconnect()}))),Ni((function(){var r;i=Mi("FID"),n=$i(t,i,Io,e.reportAllChanges),Eo=[],wo=-1,yo=null,Mo(addEventListener),r=o,Eo.push(r),No()})))}))}((function(e){var n=function(t){var e=t.entries[0],n={eventTarget:Pi(e.target),eventType:e.name,eventTime:e.startTime,eventEntry:e,loadState:Oi(e.startTime)};return Object.assign(t,{attribution:n})}(e);t(n)}),e)}((t=>{this.onReportFID(t,this.fidOpts)}),this.fidOpts),this.vitalsToTrack.includes("TTFB")&&function(t,e){Lo((function(e){var n=function(t){var e={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(t.entries.length){var n=t.entries[0],r=n.activationStart||0,i=Math.max((n.workerStart||n.fetchStart)-r,0),o=Math.max(n.domainLookupStart-r,0),s=Math.max(n.connectStart-r,0),a=Math.max(n.connectEnd-r,0);e={waitingDuration:i,cacheDuration:o-i,dnsDuration:s-o,connectionDuration:a-s,requestDuration:t.value-a,navigationEntry:n}}return Object.assign(t,{attribution:e})}(e);t(n)}),e)}((t=>{this.onReportTTFB(t,this.ttfbOpts)}),this.ttfbOpts),this.vitalsToTrack.includes("FCP")&&function(t,e){Ki((function(e){var n=function(t){var e={timeToFirstByte:0,firstByteToFCP:t.value,loadState:Oi(Ri())};if(t.entries.length){var n=Ai(),r=t.entries[t.entries.length-1];if(n){var i=n.activationStart||0,o=Math.max(0,n.responseStart-i);e={timeToFirstByte:o,firstByteToFCP:t.value-o,loadState:Oi(t.entries[0].startTime),navigationEntry:n,fcpEntry:r}}}return Object.assign(t,{attribution:e})}(e);t(n)}),e)}((t=>{this.onReportFCP(t,this.fcpOpts)}),this.fcpOpts)}getAttrPrefix(t){return t.toLowerCase()}getSharedAttributes(t){const{name:e,id:n,delta:r,rating:i,value:o,navigationType:s}=t,a=this.getAttrPrefix(e);return{[`${a}.id`]:n,[`${a}.delta`]:r,[`${a}.value`]:o,[`${a}.rating`]:i,[`${a}.navigation_type`]:s}}getAttributesForPerformanceLongAnimationFrameTiming(t,e){return{[`${t}.duration`]:e.duration,[`${t}.entryType`]:e.entryType,[`${t}.name`]:e.name,[`${t}.renderStart`]:e.renderStart,[`${t}.startTime`]:e.startTime}}getAttributesForPerformanceScriptTiming(t,e){return{[`${t}.entry_type`]:e.entryType,[`${t}.start_time`]:e.startTime,[`${t}.execution_start`]:e.executionStart,[`${t}.duration`]:e.duration,[`${t}.forced_style_and_layout_duration`]:e.forcedStyleAndLayoutDuration,[`${t}.invoker`]:e.invoker,[`${t}.pause_duration`]:e.pauseDuration,[`${t}.source_url`]:e.sourceURL,[`${t}.source_function_name`]:e.sourceFunctionName,[`${t}.source_char_position`]:e.sourceCharPosition,[`${t}.window_attribution`]:e.windowAttribution}}processPerformanceLongAnimationFrameTimingSpans(t,e){if(!e)return;const n=`${t}.timing`,r=this.getAttributesForPerformanceLongAnimationFrameTiming(n,e);this.tracer.startActiveSpan(e.name,{startTime:e.startTime},(t=>{t.setAttributes(r),this.processPerformanceScriptTimingSpans(n,e.scripts),t.end(e.startTime+e.duration)}))}processPerformanceScriptTimingSpans(t,e){if(!e)return;if(!(null==e?void 0:e.length))return;const n=`${t}.script`;e.map((t=>{this.tracer.startActiveSpan(t.name,{startTime:t.startTime},(e=>{const r=this.getAttributesForPerformanceScriptTiming(n,t);e.setAttributes(r),e.end(t.startTime+t.duration)}))}))}disable(){this.isEnabled()?(this._isEnabled=!1,this._diag.debug("Instrumentation  disabled")):this._diag.debug("Instrumentation already disabled")}enable(){this.isEnabled()?this._diag.debug("Instrumentation already enabled"):(this._isEnabled=!0,this._diag.debug("Instrumentation  enabled"),this._diag.debug(`Sending spans for ${this.vitalsToTrack.join(",")}`))}isEnabled(){return this._isEnabled}}const Fo="@honeycombio/instrumentation-global-errors";class Uo extends $o{constructor({enabled:t=!0,applyCustomAttributesOnSpan:e}={}){super(Fo,ur,{enabled:t,applyCustomAttributesOnSpan:e}),this.onError=t=>{const e="reason"in t?t.reason:t.error;console.log(this.applyCustomAttributesOnSpan),e&&function(t,e={},n=X.getTracer(Fo),r){const i=t.message,o=t.name,s=Object.assign(Object.assign({[Mt]:o,[Nt]:i,[Dt]:t.stack},function(t){if(!t)return{};const e=(0,gr.computeStackTrace)(t).stack,n=[],r=[],i=[],o=[];return Array.isArray(e)?(e.forEach((t=>{n.push(t.line),r.push(t.column),i.push(t.func),o.push(t.url)})),{"exception.structured_stacktrace.columns":r,"exception.structured_stacktrace.lines":n,"exception.structured_stacktrace.functions":i,"exception.structured_stacktrace.urls":o}):{}}(t)),e),a=n.startSpan("exception",{attributes:s},qt.active());r&&r(a,t),a.setStatus({code:xe.ERROR,message:i}),a.end()}(e,{},this.tracer,this.applyCustomAttributesOnSpan)},t&&this.enable(),this._isEnabled=t,this.applyCustomAttributesOnSpan=e}init(){}disable(){this.isEnabled()?(this._isEnabled=!1,window.removeEventListener("error",this.onError),window.removeEventListener("unhandledrejection",this.onError),this._diag.debug("Instrumentation  disabled")):this._diag.debug("Instrumentation already disabled")}enable(){this.isEnabled()?this._diag.debug("Instrumentation already enabled"):(this._isEnabled=!0,window.addEventListener("error",this.onError),window.addEventListener("unhandledrejection",this.onError),this._diag.debug("Instrumentation  enabled"))}isEnabled(){return this._isEnabled}}const Bo="x-honeycomb-team";function Ho(t,e){const n=Object.assign({},null==t?void 0:t.headers);return e&&!n[Bo]&&(n[Bo]=e),ui(e)&&(null==t?void 0:t.dataset)&&(n["x-honeycomb-dataset"]=null==t?void 0:t.dataset),n}class zo{constructor(t,e,n,r,i){this._traceUrl="",this._logLevel=h.DEBUG,n&&(this._logLevel=n),t&&e?r&&i?fetch(r,{headers:{"x-honeycomb-team":e}}).then((t=>{if(t.ok)return t.json();throw new Error})).then((n=>{var r,o,s;const a=n;if(!(null===(r=a.team)||void 0===r?void 0:r.slug))throw new Error;this._traceUrl=function(t,e,n,r,i){let o=`${i}/${n}`;return!ui(t)&&r&&(o+=`/environments/${r}`),o+=`/datasets/${e}/trace?trace_id`,o}(e,t,null===(o=a.team)||void 0===o?void 0:o.slug,null===(s=a.environment)||void 0===s?void 0:s.slug,i)})).catch((()=>{this._logLevel>=h.INFO&&console.log(wi)})):this._logLevel>=h.DEBUG&&console.debug(yi):this._logLevel>=h.DEBUG&&console.debug(_i)}export(t,e){this._traceUrl&&t.forEach((t=>{var e;!(null===(e=t.parentSpanContext)||void 0===e?void 0:e.spanId)&&this._logLevel>=h.INFO&&console.log(oi(`Honeycomb link: ${this._traceUrl}=${t.spanContext().traceId}`))})),e({code:mr.SUCCESS})}shutdown(){return Promise.resolve()}}const Vo=t=>{const e=[];return(null==t?void 0:t.localVisualizations)&&e.push(function(t){const e=li(t),{authRoot:n,uiRoot:r}=((t="")=>{const e=new URL(t),n=/(api)([.|-])?(.*?)(\.?)(honeycomb\.io)(.*)/.exec(e.host);if(null===n)return{authRoot:void 0,uiRoot:void 0};let r,i;return"-"===n[2]?(r=`api-${n[3]}`,i=`ui-${n[3]}`):(r=n[3]?`api.${n[3]}`:"api",i=n[3]?`ui.${n[3]}`:"ui"),{authRoot:`${e.protocol}//${r}.honeycomb.io/1/auth`,uiRoot:`${e.protocol}//${i}.honeycomb.io`}})((null==t?void 0:t.tracesEndpoint)||ci(t));return new zo(null==t?void 0:t.serviceName,e,null==t?void 0:t.logLevel,n,r)}(t)),(null==t?void 0:t.traceExporter)&&e.push(null==t?void 0:t.traceExporter),(null==t?void 0:t.traceExporters)&&e.push(...t.traceExporters),!0!==(null==t?void 0:t.disableDefaultTraceExporter)&&e.unshift(function(t){const e=li(t);return new Qr({url:ci(t),headers:Ho(t,e)})}(t)),n=[...e],new qo(n);var n};class qo{constructor(t){this._exporters=t}export(t,e){this._exporters.forEach((n=>n.export(t,e))),e({code:mr.SUCCESS})}async shutdown(){const t=[];this._exporters.forEach((e=>t.push(e.shutdown()))),await Promise.all(t)}}class Go{constructor(){}onStart(t,e){var n,r;(null!==(r=null===(n=wn.getBaggage(e))||void 0===n?void 0:n.getAllEntries())&&void 0!==r?r:[]).forEach((e=>{t.setAttribute(e[0],e[1].value),At.debug(`@honeycombio/opentelemetry-web: 🚨 Baggage in all outgoing headers: ${e[0]}=${e[1].value} `)}))}onEnd(){}forceFlush(){return Promise.resolve()}shutdown(){return Promise.resolve()}}class Wo{constructor(){}onStart(t){const{href:e,pathname:n,search:r,hash:i,hostname:o}=window.location;t.setAttributes({"browser.width":window.innerWidth,"browser.height":window.innerHeight,"page.hash":i,"page.url":e,"page.route":n,"page.hostname":o,"page.search":r,"url.path":n})}onEnd(){}forceFlush(){return Promise.resolve()}shutdown(){return Promise.resolve()}}const Xo=(new re).generateTraceId(),Ko={getSessionId:()=>Xo},Zo=t=>{const e=[];var n;return(null==t?void 0:t.disableBrowserAttributes)||e.push(new Wo),e.push(new Go,(n=(null==t?void 0:t.sessionProvider)||Ko,new Yr(n)),...(null==t?void 0:t.spanProcessors)||[]),e},Qo={path:!0,hash:!0,hostname:!0,referrer:!0,url:!1,search:!1};function Yo(t,e){if(t)return e}const Jo=t=>{let e=Ht({});return(null==t?void 0:t.disableBrowserAttributes)||(e=e.merge(function(t){if(!1===t||!(null===window||void 0===window?void 0:window.location))return Ht({});const e=function(t){return t?Object.assign(Object.assign({},Qo),t):Qo}(t),{href:n,pathname:r,search:i,hash:o,hostname:s}=window.location;return Ht({"entry_page.url":Yo(e.url,n),"entry_page.path":Yo(e.path,r),"entry_page.search":Yo(e.search,i),"entry_page.hash":Yo(e.hash,o),"entry_page.hostname":Yo(e.hostname,s),"entry_page.referrer":Yo(e.referrer,document.referrer)})}(null==t?void 0:t.entryPageAttributes)).merge(function(){const{browserName:t,browserVersion:e,deviceType:n}=(t=>{const e=new(ti())(t),{name:n,version:r}=e.getBrowser();return{browserName:null!=n?n:"unknown",browserVersion:null!=r?r:"unknown",deviceType:(i=e.getDevice().type,o=n,i||o?i||"desktop":"unknown")};var i,o})(navigator.userAgent);var r,i,o;return Ht({"user_agent.original":navigator.userAgent,"browser.mobile":navigator.userAgent.includes("Mobi"),"browser.touch_screen_enabled":navigator.maxTouchPoints>0,"browser.language":navigator.language,"browser.name":t,"browser.version":e,"device.type":n,"network.effectiveType":(i=navigator.connection,null!==(o=null==i?void 0:i.effectiveType)&&void 0!==o?o:"unknown"),"screen.width":window.screen.width,"screen.height":window.screen.height,"screen.size":(r=window.screen.width,r<=768?"small":r>768&&r<=1024?"medium":r>1024?"large":"unknown")})}())),e=e.merge(Ht({"honeycomb.distro.version":ur,"honeycomb.distro.runtime_version":"browser"})),(null==t?void 0:t.resource)&&(e=e.merge(t.resource)),(null==t?void 0:t.resourceAttributes)&&(e=e.merge(Ht(t.resourceAttributes))),e};class ts extends ei{constructor(t){var e,n;const r=[...(null==t?void 0:t.instrumentations)||[]];!1!==(null===(e=null==t?void 0:t.webVitalsInstrumentationConfig)||void 0===e?void 0:e.enabled)&&r.push(new jo(null==t?void 0:t.webVitalsInstrumentationConfig)),!1!==(null===(n=null==t?void 0:t.globalErrorsInstrumentationConfig)||void 0===n?void 0:n.enabled)&&r.push(new Uo(null==t?void 0:t.globalErrorsInstrumentationConfig)),super(Object.assign(Object.assign({},t),{instrumentations:r,resource:Jo(t),sampler:Ei(t),spanProcessors:Zo(t),traceExporter:Vo(t)})),(t=>{var e,n;const r=(null==t?void 0:t.logLevel)?t.logLevel:h.DEBUG;if(null==t?void 0:t.skipOptionsValidation)return void(r>=h.DEBUG&&console.debug(gi));const i=null!==(e=null==t?void 0:t.tracesEndpoint)&&void 0!==e?e:null==t?void 0:t.endpoint;if(!i||!(t=>{try{return!new URL(t).hostname.endsWith(".honeycomb.io")}catch(t){return!1}})(i))return!(null==t?void 0:t.apiKey)&&r>=h.WARN&&console.warn(pi),!(null==t?void 0:t.serviceName)&&r>=h.WARN&&console.warn(hi),(null==t?void 0:t.apiKey)&&!ui(null==t?void 0:t.apiKey)&&(null==t?void 0:t.dataset)&&r>=h.WARN&&console.warn(fi),(null==t?void 0:t.apiKey)&&ui(null==t?void 0:t.apiKey)&&!(null==t?void 0:t.dataset)&&r>=h.WARN&&console.warn(mi),(null==t?void 0:t.sampler)&&r>=h.DEBUG&&console.debug(bi),!0!==(null==t?void 0:t.disableDefaultTraceExporter)||(null==t?void 0:t.traceExporter)||(null===(n=null==t?void 0:t.traceExporters)||void 0===n?void 0:n.length)||console.warn(Si),t;r>=h.DEBUG&&console.debug(vi)})(t),(null==t?void 0:t.debug)&&function(t){if(!(null==t?void 0:t.debug))return;At.setLogger(new Hn,h.DEBUG),At.debug(oi("🐝 Honeycomb Web SDK Debug Mode Enabled 🐝"));const e=ci(t),n=Object.assign(Object.assign(Object.assign({},ii),t),{tracesEndpoint:e});!function(t){const e=li(t)||"";e?At.debug(oi(`API Key configured for traces: '${e}'`)):At.debug(pi)}(n),function(t){const e=t.serviceName||ii.serviceName;e!==ii.serviceName?At.debug(`@honeycombio/opentelemetry-web: Service Name configured for traces: '${e}'`):At.debug(hi)}(n),function(t){const e=ci(t);e?At.debug(oi(`Endpoint configured for traces: '${e}'`)):At.debug(oi("No endpoint configured for traces"))}(n),function(t){const e=di(t);e?At.debug(oi(`Sample Rate configured for traces: '${e}'`)):At.debug("No sampler configured for traces")}(n)}(t)}}const es=performance;function ns(t,e,n){let r,i;try{i=t()}catch(t){r=t}finally{if(e(r,i),r&&!n)throw r;return i}}function rs(t){return"function"==typeof t&&"function"==typeof t.__original&&"function"==typeof t.__unwrap&&!0===t.__wrapped}var is,os;new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$"),function(t){t.DOCUMENT_LOAD="documentLoad",t.DOCUMENT_FETCH="documentFetch",t.RESOURCE_FETCH="resourceFetch"}(is||(is={})),function(t){t.FIRST_PAINT="firstPaint",t.FIRST_CONTENTFUL_PAINT="firstContentfulPaint"}(os||(os={}));const ss={"first-paint":os.FIRST_PAINT,"first-contentful-paint":os.FIRST_CONTENTFUL_PAINT};function as(t,e){return"string"==typeof e?t===e:!!t.match(e)}const us=performance,cs=Math.pow(10,6),ls=Math.pow(10,9);function ds(t){const e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*cs)]}function ps(t){return function(t,e){const n=[t[0]+e[0],t[1]+e[1]];return n[1]>=ls&&(n[1]-=ls,n[0]+=1),n}(ds(function(){let t=us.timeOrigin;if("number"!=typeof t){const e=us;t=e.timing&&e.timing.fetchStart}return t}()),ds("number"==typeof t?t:us.now()))}var hs;!function(t){t.COMPONENT="component",t.HTTP_ERROR_NAME="http.error_name",t.HTTP_STATUS_TEXT="http.status_text"}(hs||(hs={}));const fs=At.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-fetch/utils"});const ms=new TextEncoder;function gs(t){return ms.encode(t).byteLength}const vs="0.200.0",bs="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},_s="object"==typeof process&&"node"===process.release?.name,ys=performance,ws=Math.pow(10,6),Ss=Math.pow(10,9);function Es(t){const e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*ws)]}function Ts(t){return function(t,e){const n=[t[0]+e[0],t[1]+e[1]];return n[1]>=Ss&&(n[1]-=Ss,n[0]+=1),n}(Es(function(){let t=ys.timeOrigin;if("number"!=typeof t){const e=ys;t=e.timing&&e.timing.fetchStart}return t}()),Es("number"==typeof t?t:ys.now()))}var Cs;!function(t){t.EVENT_TYPE="event_type",t.TARGET_ELEMENT="target_element",t.TARGET_XPATH="target_xpath",t.HTTP_URL="http.url"}(Cs||(Cs={}));const xs="0.45.0",As=["click"];function Os(){return!1}const Ls=performance;function Ps(t,e){return"string"==typeof e?t===e:!!t.match(e)}const ks=Math.pow(10,6),Rs=Math.pow(10,9);function Ns(t){const e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*ks)]}function Ds(t){return function(t,e){const n=[t[0]+e[0],t[1]+e[1]];return n[1]>=Rs&&(n[1]-=Rs,n[0]+=1),n}(Ns(function(){let t=Ls.timeOrigin;if("number"!=typeof t){const e=Ls;t=e.timing&&e.timing.fetchStart}return t}()),Ns("number"==typeof t?t:Ls.now()))}var Ms;!function(t){t.METHOD_OPEN="open",t.METHOD_SEND="send",t.EVENT_ABORT="abort",t.EVENT_ERROR="error",t.EVENT_LOAD="loaded",t.EVENT_TIMEOUT="timeout"}(Ms||(Ms={}));const Is=At.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-xml-http-request/utils"});const $s=new TextEncoder;function js(t){return $s.encode(t).byteLength}const Fs="0.200.0";var Us;!function(t){t.HTTP_STATUS_TEXT="http.status_text"}(Us||(Us={}));const Bs={"@opentelemetry/instrumentation-document-load":class extends qn{component="document-load";version="1";moduleName=this.component;constructor(t={}){super("@opentelemetry/instrumentation-document-load","0.45.0",t)}init(){}_onDocumentLoaded(){window.setTimeout((()=>{this._collectPerformance()}))}_addResourcesSpans(t){const e=es.getEntriesByType?.("resource");e&&e.forEach((e=>{this._initResourceSpan(e,t)}))}_collectPerformance(){const t=Array.from(document.getElementsByTagName("meta")).find((t=>"traceparent"===t.getAttribute("name"))),e=(()=>{const t={},e=es.getEntriesByType?.("navigation")[0];if(e)Object.values(Un).forEach((n=>{if(tr(e,n)){const r=e[n];"number"==typeof r&&(t[n]=r)}}));else{const e=es.timing;e&&Object.values(Un).forEach((n=>{if(tr(e,n)){const r=e[n];"number"==typeof r&&(t[n]=r)}}))}return t})(),n=t&&t.content||"";qt.with(wn.extract(f,{traceparent:n}),(()=>{const t=this._startSpan(is.DOCUMENT_LOAD,Un.FETCH_START,e);t&&(qt.with(X.setSpan(qt.active(),t),(()=>{const t=this._startSpan(is.DOCUMENT_FETCH,Un.FETCH_START,e);t&&(t.setAttribute(He,location.href),qt.with(X.setSpan(qt.active(),t),(()=>{this.getConfig().ignoreNetworkEvents||nr(t,e),this._addCustomAttributesOnSpan(t,this.getConfig().applyCustomAttributesOnSpan?.documentFetch),this._endSpan(t,Un.RESPONSE_END,e)})))})),t.setAttribute(He,location.href),t.setAttribute(Ge,navigator.userAgent),this._addResourcesSpans(t),this.getConfig().ignoreNetworkEvents||(er(t,Un.FETCH_START,e),er(t,Un.UNLOAD_EVENT_START,e),er(t,Un.UNLOAD_EVENT_END,e),er(t,Un.DOM_INTERACTIVE,e),er(t,Un.DOM_CONTENT_LOADED_EVENT_START,e),er(t,Un.DOM_CONTENT_LOADED_EVENT_END,e),er(t,Un.DOM_COMPLETE,e),er(t,Un.LOAD_EVENT_START,e),er(t,Un.LOAD_EVENT_END,e)),this.getConfig().ignorePerformancePaintEvents||(t=>{const e=es.getEntriesByType?.("paint");e&&e.forEach((({name:e,startTime:n})=>{tr(ss,e)&&t.addEvent(ss[e],n)}))})(t),this._addCustomAttributesOnSpan(t,this.getConfig().applyCustomAttributesOnSpan?.documentLoad),this._endSpan(t,Un.LOAD_EVENT_END,e))}))}_endSpan(t,e,n){t&&(tr(n,e)?t.end(n[e]):t.end())}_initResourceSpan(t,e){const n=this._startSpan(is.RESOURCE_FETCH,Un.FETCH_START,t,e);n&&(n.setAttribute(He,t.name),this.getConfig().ignoreNetworkEvents||nr(n,t),this._addCustomAttributesOnResourceSpan(n,t,this.getConfig().applyCustomAttributesOnSpan?.resourceFetch),this._endSpan(n,Un.RESPONSE_END,t))}_startSpan(t,e,n,r){if(tr(n,e)&&"number"==typeof n[e])return this.tracer.startSpan(t,{startTime:n[e]},r?X.setSpan(qt.active(),r):void 0)}_waitForPageLoad(){"complete"===window.document.readyState?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))}_addCustomAttributesOnSpan(t,e){e&&ns((()=>e(t)),(t=>{t&&this._diag.error("addCustomAttributesOnSpan",t)}),!0)}_addCustomAttributesOnResourceSpan(t,e,n){n&&ns((()=>n(t,e)),(t=>{t&&this._diag.error("addCustomAttributesOnResourceSpan",t)}),!0)}enable(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()}disable(){window.removeEventListener("load",this._onDocumentLoaded)}},"@opentelemetry/instrumentation-fetch":class extends qn{component="fetch";version=vs;moduleName=this.component;_usedResources=new WeakSet;_tasksCount=0;constructor(t={}){super("@opentelemetry/instrumentation-fetch",vs,t)}init(){}_addChildSpan(t,e){const n=this.tracer.startSpan("CORS Preflight",{startTime:e[Un.FETCH_START]},X.setSpan(qt.active(),t));nr(n,e,this.getConfig().ignoreNetworkEvents),n.end(e[Un.RESPONSE_END])}_addFinalSpanAttributes(t,e){const n=or(e.url);t.setAttribute(qe,e.status),null!=e.statusText&&t.setAttribute(hs.HTTP_STATUS_TEXT,e.statusText),t.setAttribute(ze,n.host),t.setAttribute(Ve,n.protocol.replace(":","")),"undefined"!=typeof navigator&&t.setAttribute(Ge,navigator.userAgent)}_addHeaders(t,e){if(!ar(e,this.getConfig().propagateTraceHeaderCorsUrls)){const t={};return wn.inject(qt.active(),t),void(Object.keys(t).length>0&&this._diag.debug("headers inject skipped due to CORS policy"))}if(t instanceof Request)wn.inject(qt.active(),t.headers,{set:(t,e,n)=>t.set(e,"string"==typeof n?n:String(n))});else if(t.headers instanceof Headers)wn.inject(qt.active(),t.headers,{set:(t,e,n)=>t.set(e,"string"==typeof n?n:String(n))});else if(t.headers instanceof Map)wn.inject(qt.active(),t.headers,{set:(t,e,n)=>t.set(e,"string"==typeof n?n:String(n))});else{const e={};wn.inject(qt.active(),e),t.headers=Object.assign({},e,t.headers||{})}}_clearResources(){0===this._tasksCount&&this.getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)}_createSpan(t,e={}){if(function(t,e){if(!e)return!1;for(const n of e)if(as(t,n))return!0;return!1}(t,this.getConfig().ignoreUrls))return void this._diag.debug("ignoring span as url matches ignored url");const n=(e.method||"GET").toUpperCase(),r=`HTTP ${n}`;return this.tracer.startSpan(r,{kind:Te.CLIENT,attributes:{[hs.COMPONENT]:this.moduleName,[Be]:n,[He]:t}})}_findResourceAndAddNetworkEvents(t,e,n){let r=e.entries;if(!r.length){if(!performance.getEntriesByType)return;r=performance.getEntriesByType("resource")}const i=ir(e.spanUrl,e.startTime,n,r,this._usedResources,"fetch");if(i.mainRequest){const e=i.mainRequest;this._markResourceAsUsed(e);const n=i.corsPreFlightRequest;n&&(this._addChildSpan(t,n),this._markResourceAsUsed(n)),nr(t,e,this.getConfig().ignoreNetworkEvents)}}_markResourceAsUsed(t){this._usedResources.add(t)}_endSpan(t,e,n){const r=ds(Date.now()),i=ps();this._addFinalSpanAttributes(t,n),setTimeout((()=>{e.observer?.disconnect(),this._findResourceAndAddNetworkEvents(t,e,i),this._tasksCount--,this._clearResources(),t.end(r)}),300)}_patchConstructor(){return t=>{const e=this;return function(...n){const r=this,i=or(n[0]instanceof Request?n[0].url:String(n[0])).href,o=n[0]instanceof Request?n[0]:n[1]||{},s=e._createSpan(i,o);if(!s)return t.apply(this,n);const a=e._prepareSpanData(i);function u(t,n){e._applyAttributesAfterFetch(t,o,n),e._endSpan(t,a,{status:n.status||0,statusText:n.message,url:i})}function c(t,n){e._applyAttributesAfterFetch(t,o,n),n.status>=200&&n.status<400?e._endSpan(t,a,n):e._endSpan(t,a,{status:n.status,statusText:n.statusText,url:i})}function l(t,e,n){try{const e=n.clone().body;if(e){const r=e.getReader(),i=()=>{r.read().then((({done:e})=>{e?c(t,n):i()}),(e=>{u(t,e)}))};i()}else c(t,n)}finally{e(n)}}function d(t,e,n){try{u(t,n)}finally{e(n)}}return e.getConfig().measureRequestSize&&function(...t){if(t[0]instanceof URL||"string"==typeof t[0]){const n=t[1];if(!n?.body)return Promise.resolve();if(n.body instanceof ReadableStream){const{body:t,length:e}=function(t){if(!t.pipeThrough)return fs.warn("Platform has ReadableStream but not pipeThrough!"),{body:t,length:Promise.resolve(void 0)};let e,n=0;const r=new Promise((t=>{e=t})),i=new TransformStream({start(){},async transform(t,e){const r=await t;n+=r.byteLength,e.enqueue(t)},flush(){e(n)}});return{body:t.pipeThrough(i),length:r}}(n.body);return n.body=t,e}return Promise.resolve((e=n.body,"undefined"!=typeof Document&&e instanceof Document?(new XMLSerializer).serializeToString(document).length:"string"==typeof e?gs(e):e instanceof Blob?e.size:e instanceof FormData?function(t){let e=0;for(const[n,r]of t.entries())e+=n.length,r instanceof Blob?e+=r.size:e+=r.length;return e}(e):e instanceof URLSearchParams?gs(e.toString()):void 0!==e.byteLength?e.byteLength:void fs.warn("unknown body type")))}var e;{const e=t[0];return e?.body?e.clone().text().then((t=>gs(t))):Promise.resolve()}}(...n).then((t=>{t&&s.setAttribute(We,t)})).catch((t=>{e._diag.warn("getFetchBodyLength",t)})),new Promise(((n,a)=>qt.with(X.setSpan(qt.active(),s),(()=>(e._addHeaders(o,i),e._callRequestHook(s,o),e._tasksCount++,t.apply(r,o instanceof Request?[o]:[i,o]).then(l.bind(r,s,n),d.bind(r,s,a)))))))}}}_applyAttributesAfterFetch(t,e,n){const r=this.getConfig().applyCustomAttributesOnSpan;r&&ns((()=>r(t,e,n)),(t=>{t&&this._diag.error("applyCustomAttributesOnSpan",t)}),!0)}_callRequestHook(t,e){const n=this.getConfig().requestHook;n&&ns((()=>n(t,e)),(t=>{t&&this._diag.error("requestHook",t)}),!0)}_prepareSpanData(t){const e=ps(),n=[];if("function"!=typeof PerformanceObserver)return{entries:n,startTime:e,spanUrl:t};const r=new PerformanceObserver((e=>{e.getEntries().forEach((e=>{"fetch"===e.initiatorType&&e.name===t&&n.push(e)}))}));return r.observe({entryTypes:["resource"]}),{entries:n,observer:r,startTime:e,spanUrl:t}}enable(){_s?this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()"):(rs(fetch)&&(this._unwrap(bs,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(bs,"fetch",this._patchConstructor()))}disable(){_s||(this._unwrap(bs,"fetch"),this._usedResources=new WeakSet)}},"@opentelemetry/instrumentation-user-interaction":class extends qn{version=xs;moduleName="user-interaction";_spansData=new WeakMap;_wrappedListeners=new WeakMap;_eventsSpanMap=new WeakMap;_eventNames;_shouldPreventSpanCreation;constructor(t={}){super("@opentelemetry/instrumentation-user-interaction",xs,t),this._eventNames=new Set(t?.eventNames??As),this._shouldPreventSpanCreation="function"==typeof t?.shouldPreventSpanCreation?t.shouldPreventSpanCreation:Os}init(){}_checkForTimeout(t,e){const n=this._spansData.get(e);n&&("setTimeout"===t.source?n.hrTimeLastTimeout=Ts():"Promise.then"!==t.source&&"setTimeout"!==t.source&&(n.hrTimeLastTimeout=void 0))}_allowEventName(t){return this._eventNames.has(t)}_createSpan(t,e,n){if(!(t instanceof HTMLElement))return;if(!t.getAttribute)return;if(t.hasAttribute("disabled"))return;if(!this._allowEventName(e))return;const r=sr(t,!0);try{const i=this.tracer.startSpan(e,{attributes:{[Cs.EVENT_TYPE]:e,[Cs.TARGET_ELEMENT]:t.tagName,[Cs.TARGET_XPATH]:r,[Cs.HTTP_URL]:window.location.href}},n?X.setSpan(qt.active(),n):void 0);if(!0===this._shouldPreventSpanCreation(e,t,i))return;return this._spansData.set(i,{taskCount:0}),i}catch(t){this._diag.error("failed to start create new user interaction span",t)}}_decrementTask(t){const e=this._spansData.get(t);e&&(e.taskCount--,0===e.taskCount&&this._tryToEndSpan(t,e.hrTimeLastTimeout))}_getCurrentSpan(t){const e=t.get("OT_ZONE_CONTEXT");return e?X.getSpan(e):e}_incrementTask(t){const e=this._spansData.get(t);e&&e.taskCount++}addPatchedListener(t,e,n,r){let i=this._wrappedListeners.get(n);i||(i=new Map,this._wrappedListeners.set(n,i));let o=i.get(e);return o||(o=new Map,i.set(e,o)),!o.has(t)&&(o.set(t,r),!0)}removePatchedListener(t,e,n){const r=this._wrappedListeners.get(n);if(!r)return;const i=r.get(e);if(!i)return;const o=i.get(t);return o&&(i.delete(t),0===i.size&&(r.delete(e),0===r.size&&this._wrappedListeners.delete(n))),o}_invokeListener(t,e,n){return"function"==typeof t?t.apply(e,n):t.handleEvent(n[0])}_patchAddEventListener(){const t=this;return e=>function(n,r,i){if(!r)return e.call(this,n,r,i);const o=i&&"object"==typeof i&&i.once,s=function(...e){let i;const s=e[0],a=s?.target;s&&(i=t._eventsSpanMap.get(s)),o&&t.removePatchedListener(this,n,r);const u=t._createSpan(a,n,i);return u?(s&&t._eventsSpanMap.set(s,u),qt.with(X.setSpan(qt.active(),u),(()=>{const n=t._invokeListener(r,this,e);return u.end(),n}))):t._invokeListener(r,this,e)};return t.addPatchedListener(this,n,r,s)?e.call(this,n,s,i):void 0}}_patchRemoveEventListener(){const t=this;return e=>function(n,r,i){const o=t.removePatchedListener(this,n,r);return o?e.call(this,n,o,i):e.call(this,n,r,i)}}_getPatchableEventTargets(){return window.EventTarget?[EventTarget.prototype]:[Node.prototype,Window.prototype]}_patchHistoryApi(){this._unpatchHistoryApi(),this._wrap(history,"replaceState",this._patchHistoryMethod()),this._wrap(history,"pushState",this._patchHistoryMethod()),this._wrap(history,"back",this._patchHistoryMethod()),this._wrap(history,"forward",this._patchHistoryMethod()),this._wrap(history,"go",this._patchHistoryMethod())}_patchHistoryMethod(){const t=this;return e=>function(...n){const r=`${location.pathname}${location.hash}${location.search}`,i=e.apply(this,n),o=`${location.pathname}${location.hash}${location.search}`;return r!==o&&t._updateInteractionName(o),i}}_unpatchHistoryApi(){rs(history.replaceState)&&this._unwrap(history,"replaceState"),rs(history.pushState)&&this._unwrap(history,"pushState"),rs(history.back)&&this._unwrap(history,"back"),rs(history.forward)&&this._unwrap(history,"forward"),rs(history.go)&&this._unwrap(history,"go")}_updateInteractionName(t){const e=X.getSpan(qt.active());e&&"function"==typeof e.updateName&&e.updateName(`Navigation: ${t}`)}_patchZoneCancelTask(){const t=this;return e=>function(n){const r=Zone.current,i=t._getCurrentSpan(r);return i&&t._shouldCountTask(n,r)&&t._decrementTask(i),e.call(this,n)}}_patchZoneScheduleTask(){const t=this;return e=>function(n){const r=Zone.current,i=t._getCurrentSpan(r);return i&&t._shouldCountTask(n,r)&&(t._incrementTask(i),t._checkForTimeout(n,i)),e.call(this,n)}}_patchZoneRunTask(){const t=this;return e=>function(n,r,i){const o=Array.isArray(i)&&i[0]instanceof Event?i[0]:void 0,s=o?.target;let a;const u=this;if(s){if(a=t._createSpan(s,n.eventName),a)return t._incrementTask(a),u.run((()=>{try{return qt.with(X.setSpan(qt.active(),a),(()=>{const t=Zone.current;return n._zone=t,e.call(t,n,r,i)}))}finally{t._decrementTask(a)}}))}else a=t._getCurrentSpan(u);try{return e.call(u,n,r,i)}finally{a&&t._shouldCountTask(n,u)&&t._decrementTask(a)}}}_shouldCountTask(t,e){if(t._zone&&(e=t._zone),!e||!t.data||t.data.isPeriodic)return!1;const n=this._getCurrentSpan(e);return!(!n||!this._spansData.get(n)||"macroTask"!==t.type&&"microTask"!==t.type)}_tryToEndSpan(t,e){t&&this._spansData.get(t)&&(t.end(e),this._spansData.delete(t))}enable(){const t=this._getZoneWithPrototype();this._diag.debug("applying patch to",this.moduleName,this.version,"zone:",!!t),t?(rs(t.prototype.runTask)&&(this._unwrap(t.prototype,"runTask"),this._diag.debug("removing previous patch from method runTask")),rs(t.prototype.scheduleTask)&&(this._unwrap(t.prototype,"scheduleTask"),this._diag.debug("removing previous patch from method scheduleTask")),rs(t.prototype.cancelTask)&&(this._unwrap(t.prototype,"cancelTask"),this._diag.debug("removing previous patch from method cancelTask")),this._zonePatched=!0,this._wrap(t.prototype,"runTask",this._patchZoneRunTask()),this._wrap(t.prototype,"scheduleTask",this._patchZoneScheduleTask()),this._wrap(t.prototype,"cancelTask",this._patchZoneCancelTask())):(this._zonePatched=!1,this._getPatchableEventTargets().forEach((t=>{rs(t.addEventListener)&&(this._unwrap(t,"addEventListener"),this._diag.debug("removing previous patch from method addEventListener")),rs(t.removeEventListener)&&(this._unwrap(t,"removeEventListener"),this._diag.debug("removing previous patch from method removeEventListener")),this._wrap(t,"addEventListener",this._patchAddEventListener()),this._wrap(t,"removeEventListener",this._patchRemoveEventListener())}))),this._patchHistoryApi()}disable(){const t=this._getZoneWithPrototype();this._diag.debug("removing patch from",this.moduleName,this.version,"zone:",!!t),t&&this._zonePatched?(rs(t.prototype.runTask)&&this._unwrap(t.prototype,"runTask"),rs(t.prototype.scheduleTask)&&this._unwrap(t.prototype,"scheduleTask"),rs(t.prototype.cancelTask)&&this._unwrap(t.prototype,"cancelTask")):this._getPatchableEventTargets().forEach((t=>{rs(t.addEventListener)&&this._unwrap(t,"addEventListener"),rs(t.removeEventListener)&&this._unwrap(t,"removeEventListener")})),this._unpatchHistoryApi()}_getZoneWithPrototype(){return window.Zone}},"@opentelemetry/instrumentation-xml-http-request":class extends qn{component="xml-http-request";version=Fs;moduleName=this.component;_tasksCount=0;_xhrMem=new WeakMap;_usedResources=new WeakSet;constructor(t={}){super("@opentelemetry/instrumentation-xml-http-request",Fs,t)}init(){}_addHeaders(t,e){if(!ar(or(e).href,this.getConfig().propagateTraceHeaderCorsUrls)){const t={};return wn.inject(qt.active(),t),void(Object.keys(t).length>0&&this._diag.debug("headers inject skipped due to CORS policy"))}const n={};wn.inject(qt.active(),n),Object.keys(n).forEach((e=>{t.setRequestHeader(e,String(n[e]))}))}_addChildSpan(t,e){qt.with(X.setSpan(qt.active(),t),(()=>{const t=this.tracer.startSpan("CORS Preflight",{startTime:e[Un.FETCH_START]});nr(t,e,this.getConfig().ignoreNetworkEvents),t.end(e[Un.RESPONSE_END])}))}_addFinalSpanAttributes(t,e,n){if("string"==typeof n){const r=or(n);void 0!==e.status&&t.setAttribute(qe,e.status),void 0!==e.statusText&&t.setAttribute(Us.HTTP_STATUS_TEXT,e.statusText),t.setAttribute(ze,r.host),t.setAttribute(Ve,r.protocol.replace(":","")),t.setAttribute(Ge,navigator.userAgent)}}_applyAttributesAfterXHR(t,e){const n=this.getConfig().applyCustomAttributesOnSpan;"function"==typeof n&&ns((()=>n(t,e)),(t=>{t&&this._diag.error("applyCustomAttributesOnSpan",t)}),!0)}_addResourceObserver(t,e){const n=this._xhrMem.get(t);n&&"function"==typeof PerformanceObserver&&"function"==typeof PerformanceResourceTiming&&(n.createdResources={observer:new PerformanceObserver((t=>{const r=t.getEntries(),i=or(e);r.forEach((t=>{"xmlhttprequest"===t.initiatorType&&t.name===i.href&&n.createdResources&&n.createdResources.entries.push(t)}))})),entries:[]},n.createdResources.observer.observe({entryTypes:["resource"]}))}_clearResources(){0===this._tasksCount&&this.getConfig().clearTimingResources&&(Ls.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)}_findResourceAndAddNetworkEvents(t,e,n,r,i){if(!(n&&r&&i&&t.createdResources))return;let o=t.createdResources.entries;o&&o.length||(o=Ls.getEntriesByType("resource"));const s=ir(or(n).href,r,i,o,this._usedResources);if(s.mainRequest){const t=s.mainRequest;this._markResourceAsUsed(t);const n=s.corsPreFlightRequest;n&&(this._addChildSpan(e,n),this._markResourceAsUsed(n)),nr(e,t,this.getConfig().ignoreNetworkEvents)}}_cleanPreviousSpanInformation(t){const e=this._xhrMem.get(t);if(e){const n=e.callbackToRemoveEvents;n&&n(),this._xhrMem.delete(t)}}_createSpan(t,e,n){if(function(t,e){if(!e)return!1;for(const n of e)if(Ps(t,n))return!0;return!1}(e,this.getConfig().ignoreUrls))return void this._diag.debug("ignoring span as url matches ignored url");const r=n.toUpperCase(),i=this.tracer.startSpan(r,{kind:Te.CLIENT,attributes:{[Be]:n,[He]:or(e).toString()}});return i.addEvent(Ms.METHOD_OPEN),this._cleanPreviousSpanInformation(t),this._xhrMem.set(t,{span:i,spanUrl:e}),i}_markResourceAsUsed(t){this._usedResources.add(t)}_patchOpen(){return t=>{const e=this;return function(...n){const r=n[0],i=n[1];return e._createSpan(this,i,r),t.apply(this,n)}}}_patchSend(){const t=this;function e(e,n){const r=t._xhrMem.get(n);if(!r)return;r.status=n.status,r.statusText=n.statusText,t._xhrMem.delete(n),r.span&&t._applyAttributesAfterXHR(r.span,n);const i=Ds(),o=Date.now();setTimeout((()=>{!function(e,n,r,i){const o=n.callbackToRemoveEvents;"function"==typeof o&&o();const{span:s,spanUrl:a,sendStartTime:u}=n;s&&(t._findResourceAndAddNetworkEvents(n,s,a,u,r),s.addEvent(e,i),t._addFinalSpanAttributes(s,n,a),s.end(i),t._tasksCount--),t._clearResources()}(e,r,i,o)}),300)}function n(){e(Ms.EVENT_ERROR,this)}function r(){e(Ms.EVENT_ABORT,this)}function i(){e(Ms.EVENT_TIMEOUT,this)}function o(){this.status<299?e(Ms.EVENT_LOAD,this):e(Ms.EVENT_ERROR,this)}return e=>function(...s){const a=t._xhrMem.get(this);if(!a)return e.apply(this,s);const u=a.span,c=a.spanUrl;if(u&&c){if(t.getConfig().measureRequestSize&&s?.[0]){const t=(l=s[0],"undefined"!=typeof Document&&l instanceof Document?(new XMLSerializer).serializeToString(document).length:"string"==typeof l?js(l):l instanceof Blob?l.size:l instanceof FormData?function(t){let e=0;for(const[n,r]of t.entries())e+=n.length,r instanceof Blob?e+=r.size:e+=r.length;return e}(l):l instanceof URLSearchParams?js(l.toString()):void 0!==l.byteLength?l.byteLength:void Is.warn("unknown body type"));void 0!==t&&u.setAttribute(We,t)}qt.with(X.setSpan(qt.active(),u),(()=>{t._tasksCount++,a.sendStartTime=Ds(),u.addEvent(Ms.METHOD_SEND),this.addEventListener("abort",r),this.addEventListener("error",n),this.addEventListener("load",o),this.addEventListener("timeout",i),a.callbackToRemoveEvents=()=>{!function(e){e.removeEventListener("abort",r),e.removeEventListener("error",n),e.removeEventListener("load",o),e.removeEventListener("timeout",i);const s=t._xhrMem.get(e);s&&(s.callbackToRemoveEvents=void 0)}(this),a.createdResources&&a.createdResources.observer.disconnect()},t._addHeaders(this,c),t._addResourceObserver(this,c)}))}var l;return e.apply(this,s)}}enable(){this._diag.debug("applying patch to",this.moduleName,this.version),rs(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),rs(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())}disable(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet}}};function Hs(t={}){for(const e of Object.keys(t))Object.prototype.hasOwnProperty.call(Bs,e)||At.error(`Provided instrumentation name "${e}" not found`);const e=[];for(const n of Object.keys(Bs)){const r=Bs[n],i=t[n]??{};if(!1!==i.enabled)try{At.debug(`Loading instrumentation for ${n}`),e.push(new r(i))}catch(t){At.error(t)}else At.debug(`Disabling instrumentation for ${n}`)}return e}function zs(t){return zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zs(t)}function Vs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qs(r.key),r)}}function qs(t){var e=function(t,e){if("object"!=zs(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=zs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zs(e)?e:e+""}var Gs=function(){return function(t,e,n){return e&&Vs(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.spanCount=e.spanCount||0,this.spanEventCount=e.spanEventCount||0}),[{key:"updateCounts",value:function(){window.postMessage({type:"UPDATE_SPAN_COUNT",spans:this.spanCount,events:this.spanEventCount},"*")}},{key:"onStart",value:function(t,e){}},{key:"onEnd",value:function(t){this.spanCount++,this.spanEventCount+=t.events.length,this.updateCounts()}},{key:"shutdown",value:function(){return console.log("SpanCounterProcessor shutdown"),Promise.resolve()}},{key:"forceFlush",value:function(){return Promise.resolve()}},{key:"resetCount",value:function(){this.spanCount=0,this.spanEventCount=0,console.log("Counts reset to 0"),this.updateCounts()}}])}();const Ws=Gs;var Xs;console.log("Tracing script loaded");var Ks={ignoreNetworkEvents:!0};window.addEventListener("message",(function(t){if(t.source===window)switch(t.data.type){case"START_TRACING":if(Xs)return;var e=t.data;n=e.apiKey,r=e.serviceName,i=e.initialCounts,console.log("Initializing HoneycombWebSDK for Service Name:",r),Xs=new Ws(i),window.postMessage({type:"GET_COUNTS"},"*"),new ts({apiKey:n,serviceName:r,instrumentations:[Hs({"@opentelemetry/instrumentation-xml-http-request":Ks,"@opentelemetry/instrumentation-fetch":Ks,"@opentelemetry/instrumentation-document-load":Ks})],spanProcessors:[Xs]}).start(),Xs.updateCounts(),console.log("Tracing started");break;case"START_NEW_SESSION":Xs?Xs.resetCount():window.postMessage({type:"UPDATE_SPAN_COUNT",spans:0,events:0},"*")}var n,r,i}))})(),r})()));